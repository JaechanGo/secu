(window["opendistroSecurityKibana_bundle_jsonpfunction"]=window["opendistroSecurityKibana_bundle_jsonpfunction"]||[]).push([[3],{222:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(223);case"v7light":return __webpack_require__(225);case"v8dark":return __webpack_require__(227);case"v8light":return __webpack_require__(229)}},223:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(224);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},224:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *   Licensed under the Apache License, Version 2.0 (the "License").\n *   You may not use this file except in compliance with the License.\n *   A copy of the License is located at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n *   or in the "license" file accompanying this file. This file is distributed\n *   on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *   express or implied. See the License for the specific language governing\n *   permissions and limitations under the License.\n */\n.panel-header-count {\n  color: #687078;\n  font-weight: normal; }\n\n.panel-header-subtext {\n  width: 75%; }\n\n.text-center {\n  text-align: \'center\'; }\n\n.panel-restrict-width {\n  max-width: 75%; }\n\n.external-link-inline-block {\n  display: inline-block; }\n\n.table-items {\n  font-size: inherit; }\n\n.limit-width-input {\n  max-width: 400px; }\n',""]);module.exports=exports},225:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(226);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},226:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *   Licensed under the Apache License, Version 2.0 (the "License").\n *   You may not use this file except in compliance with the License.\n *   A copy of the License is located at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n *   or in the "license" file accompanying this file. This file is distributed\n *   on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *   express or implied. See the License for the specific language governing\n *   permissions and limitations under the License.\n */\n.panel-header-count {\n  color: #687078;\n  font-weight: normal; }\n\n.panel-header-subtext {\n  width: 75%; }\n\n.text-center {\n  text-align: \'center\'; }\n\n.panel-restrict-width {\n  max-width: 75%; }\n\n.external-link-inline-block {\n  display: inline-block; }\n\n.table-items {\n  font-size: inherit; }\n\n.limit-width-input {\n  max-width: 400px; }\n',""]);module.exports=exports},227:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(228);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},228:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *   Licensed under the Apache License, Version 2.0 (the "License").\n *   You may not use this file except in compliance with the License.\n *   A copy of the License is located at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n *   or in the "license" file accompanying this file. This file is distributed\n *   on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *   express or implied. See the License for the specific language governing\n *   permissions and limitations under the License.\n */\n.panel-header-count {\n  color: #687078;\n  font-weight: normal; }\n\n.panel-header-subtext {\n  width: 75%; }\n\n.text-center {\n  text-align: \'center\'; }\n\n.panel-restrict-width {\n  max-width: 75%; }\n\n.external-link-inline-block {\n  display: inline-block; }\n\n.table-items {\n  font-size: inherit; }\n\n.limit-width-input {\n  max-width: 400px; }\n',""]);module.exports=exports},229:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(230);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},230:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *   Licensed under the Apache License, Version 2.0 (the "License").\n *   You may not use this file except in compliance with the License.\n *   A copy of the License is located at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n *   or in the "license" file accompanying this file. This file is distributed\n *   on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *   express or implied. See the License for the specific language governing\n *   permissions and limitations under the License.\n */\n.panel-header-count {\n  color: #687078;\n  font-weight: normal; }\n\n.panel-header-subtext {\n  width: 75%; }\n\n.text-center {\n  text-align: \'center\'; }\n\n.panel-restrict-width {\n  max-width: 75%; }\n\n.external-link-inline-block {\n  display: inline-block; }\n\n.table-items {\n  font-size: inherit; }\n\n.limit-width-input {\n  max-width: 400px; }\n',""]);module.exports=exports},234:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(235);case"v7light":return __webpack_require__(237);case"v8dark":return __webpack_require__(239);case"v8light":return __webpack_require__(241)}},235:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(236);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},236:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".described-form-group {\n  max-width: 1500px; }\n\n.form-row {\n  max-width: 800px; }\n\npre code {\n  color: #666666; }\n",""]);module.exports=exports},237:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(238);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},238:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".described-form-group {\n  max-width: 1500px; }\n\n.form-row {\n  max-width: 800px; }\n\npre code {\n  color: #666666; }\n",""]);module.exports=exports},239:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(240);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},240:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".described-form-group {\n  max-width: 1500px; }\n\n.form-row {\n  max-width: 800px; }\n\npre code {\n  color: #666666; }\n",""]);module.exports=exports},241:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(242);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},242:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,".described-form-group {\n  max-width: 1500px; }\n\n.form-row {\n  max-width: 800px; }\n\npre code {\n  color: #666666; }\n",""]);module.exports=exports},243:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"efe5adda58ab69c7d28b61436e34c9ef.svg"},244:function(module,exports,__webpack_require__){switch(window.__kbnThemeTag__){case"v7dark":return __webpack_require__(245);case"v7light":return __webpack_require__(247);case"v8dark":return __webpack_require__(249);case"v8light":return __webpack_require__(251)}},245:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(246);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},246:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *   Licensed under the Apache License, Version 2.0 (the "License").\n *   You may not use this file except in compliance with the License.\n *   A copy of the License is located at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n *   or in the "license" file accompanying this file. This file is distributed\n *   on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *   express or implied. See the License for the specific language governing\n *   permissions and limitations under the License.\n */\n.permission-tree-container {\n  max-height: 200px;\n  overflow-Y: scroll;\n  width: 100%; }\n\n.tree-leaf-node:hover {\n  background-color: inherit;\n  cursor: auto; }\n',""]);module.exports=exports},247:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(248);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},248:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *   Licensed under the Apache License, Version 2.0 (the "License").\n *   You may not use this file except in compliance with the License.\n *   A copy of the License is located at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n *   or in the "license" file accompanying this file. This file is distributed\n *   on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *   express or implied. See the License for the specific language governing\n *   permissions and limitations under the License.\n */\n.permission-tree-container {\n  max-height: 200px;\n  overflow-Y: scroll;\n  width: 100%; }\n\n.tree-leaf-node:hover {\n  background-color: inherit;\n  cursor: auto; }\n',""]);module.exports=exports},249:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(250);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},250:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *   Licensed under the Apache License, Version 2.0 (the "License").\n *   You may not use this file except in compliance with the License.\n *   A copy of the License is located at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n *   or in the "license" file accompanying this file. This file is distributed\n *   on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *   express or implied. See the License for the specific language governing\n *   permissions and limitations under the License.\n */\n.permission-tree-container {\n  max-height: 200px;\n  overflow-Y: scroll;\n  width: 100%; }\n\n.tree-leaf-node:hover {\n  background-color: inherit;\n  cursor: auto; }\n',""]);module.exports=exports},251:function(module,exports,__webpack_require__){var api=__webpack_require__(15);var content=__webpack_require__(252);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);var exported=content.locals?content.locals:{};module.exports=exported},252:function(module,exports,__webpack_require__){var ___CSS_LOADER_API_IMPORT___=__webpack_require__(16);exports=___CSS_LOADER_API_IMPORT___(false);exports.push([module.i,'/*\n *   Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n *   Licensed under the Apache License, Version 2.0 (the "License").\n *   You may not use this file except in compliance with the License.\n *   A copy of the License is located at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n *   or in the "license" file accompanying this file. This file is distributed\n *   on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n *   express or implied. See the License for the specific language governing\n *   permissions and limitations under the License.\n */\n.permission-tree-container {\n  max-height: 200px;\n  overflow-Y: scroll;\n  width: 100%; }\n\n.tree-leaf-node:hover {\n  background-color: inherit;\n  cursor: auto; }\n',""]);module.exports=exports},394:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"renderApp",(function(){return renderApp}));var _index=__webpack_require__(222);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(8);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(5);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var external_kbnSharedDeps_Lodash_=__webpack_require__(6);var external_kbnSharedDeps_ReactRouterDom_=__webpack_require__(25);var types=__webpack_require__(27);var constants=__webpack_require__(13);var request_utils=__webpack_require__(18);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function updateAuditLogging(_x,_x2){return _updateAuditLogging.apply(this,arguments)}function _updateAuditLogging(){_updateAuditLogging=_asyncToGenerator(regeneratorRuntime.mark((function _callee(http,updateObject){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(request_utils["e"])(http,constants["c"],updateObject);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee)})));return _updateAuditLogging.apply(this,arguments)}function getAuditLogging(_x3){return _getAuditLogging.apply(this,arguments)}function _getAuditLogging(){_getAuditLogging=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(http){var rawConfiguration;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Object(request_utils["c"])(http,constants["b"]);case 2:rawConfiguration=_context2.sent;return _context2.abrupt("return",rawConfiguration===null||rawConfiguration===void 0?void 0:rawConfiguration.config);case 4:case"end":return _context2.stop()}}}),_callee2)})));return _getAuditLogging.apply(this,arguments)}var display_utils=__webpack_require__(47);function buildUrl(resouceType,action,resourceId,subAction){var encodedResouceId=resourceId?encodeURIComponent(resourceId):undefined;var rawContents=[resouceType,action,encodedResouceId,subAction];var contents=[];for(var _i=0,_rawContents=rawContents;_i<_rawContents.length;_i++){var content=_rawContents[_i];if(content===undefined){break}contents.push(content)}return"/"+contents.join("/")}function buildHashUrl(resouceType,action,resourceId,subAction){return"#"+buildUrl(resouceType,action,resourceId,subAction)}var audit_logging_constants=__webpack_require__(36);function ViewSettingGroup(props){var renderField=function renderField(config,setting){var val=Object(external_kbnSharedDeps_Lodash_["get"])(config,setting.path);if(setting.type==="bool"){val=val||false;return Object(display_utils["i"])(setting.title,Object(display_utils["d"])(val))}else if(setting.type==="array"){val=val||[];return Object(display_utils["i"])(setting.title,Object(display_utils["c"])(val))}else if(setting.type==="map"){val=val||{};return Object(display_utils["i"])(setting.title,Object(display_utils["f"])(val))}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null)}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,external_kbnSharedDeps_React_default.a.createElement("h3",null,props.settingGroup.title)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGrid"],{columns:3},props.settingGroup.settings.map((function(setting){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:setting.title},renderField(props.config,setting))}))))}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function audit_logging_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function audit_logging_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){audit_logging_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){audit_logging_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function renderStatusPanel(onSwitchChange,auditLoggingEnabled){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h3",null,"Audit logging")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,"Storage location"),className:"described-form-group"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{className:"form-row"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"audit.logs.storageInstruction",defaultMessage:"Configure the output location and storage types in {elasticsearchCode}. The default storage location is {internalElasticsearchCode}, which stores the logs in an index on this cluster.",values:{elasticsearchCode:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"elasticsearch.yml"),internalElasticsearchCode:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"internal_elasticsearch")}})," ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].AuditLogsStorageDoc})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,"Enable audit logging"),className:"described-form-group"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"audit-logging-enabled-switch",name:"auditLoggingEnabledSwitch",label:Object(display_utils["d"])(auditLoggingEnabled),checked:auditLoggingEnabled,onChange:onSwitchChange})))))}function audit_logging_renderGeneralSettings(config){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(ViewSettingGroup,{config:config,settingGroup:audit_logging_constants["a"].LAYER_SETTINGS}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(ViewSettingGroup,{config:config,settingGroup:audit_logging_constants["a"].ATTRIBUTE_SETTINGS}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(ViewSettingGroup,{config:config,settingGroup:audit_logging_constants["a"].IGNORE_SETTINGS}))}function renderComplianceSettings(config){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(ViewSettingGroup,{config:config,settingGroup:audit_logging_constants["a"].COMPLIANCE_CONFIG_MODE_SETTINGS}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(ViewSettingGroup,{config:config,settingGroup:audit_logging_constants["a"].COMPLIANCE_CONFIG_SETTINGS}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(ViewSettingGroup,{config:config,settingGroup:audit_logging_constants["a"].COMPLIANCE_SETTINGS_READ}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(ViewSettingGroup,{config:config,settingGroup:audit_logging_constants["a"].COMPLIANCE_SETTINGS_WRITE}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null))}function AuditLogging(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState({}),_React$useState2=_slicedToArray(_React$useState,2),configuration=_React$useState2[0],setConfiguration=_React$useState2[1];var onSwitchChange=function(){var _ref=audit_logging_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var updatedConfiguration;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;updatedConfiguration=_objectSpread({},configuration);updatedConfiguration.enabled=!updatedConfiguration.enabled;_context.next=5;return updateAuditLogging(props.coreStart.http,updatedConfiguration);case 5:setConfiguration(updatedConfiguration);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](0);console.error(_context.t0);case 11:case"end":return _context.stop()}}}),_callee,null,[[0,8]])})));return function onSwitchChange(){return _ref.apply(this,arguments)}}();external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchData=function(){var _ref2=audit_logging_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var auditLogging;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getAuditLogging(props.coreStart.http);case 3:auditLogging=_context2.sent;setConfiguration(auditLogging);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);console.log(_context2.t0);case 10:case"end":return _context2.stop()}}}),_callee2,null,[[0,7]])})));return function fetchData(){return _ref2.apply(this,arguments)}}();fetchData()}),[props.coreStart.http,props.fromType]);var statusPanel=renderStatusPanel(onSwitchChange,configuration.enabled||false);var content;if(!configuration.enabled){content=statusPanel}else{content=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,statusPanel,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h3",null,"General settings"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"general-settings-configure",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].auditLogging)+audit_logging_constants["c"]}},"Configure"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),audit_logging_renderGeneralSettings(configuration)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h3",null,"Compliance settings"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"compliance-settings-configure",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].auditLogging)+audit_logging_constants["b"]}},"Configure"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),renderComplianceSettings(configuration)))}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"panel-restrict-width"},content)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||array_state_utils_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function array_state_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return array_state_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return array_state_utils_arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return array_state_utils_arrayLikeToArray(arr)}function array_state_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function resolveValue(value){return typeof value==="function"?value():value}function updateElementInArray(setStateCallback,path,newValue){setStateCallback((function(prevState){var newState=_toConsumableArray(prevState);Object(external_kbnSharedDeps_Lodash_["set"])(newState,path,resolveValue(newValue));return newState}))}var updateElementInArrayHandler=Object(external_kbnSharedDeps_Lodash_["curry"])(updateElementInArray);function appendElementToArray(setStateCallback,path,newValue){var resolvedNewValue=resolveValue(newValue);setStateCallback((function(prevState){if(path.length===0){return[].concat(_toConsumableArray(prevState),[resolvedNewValue])}else{var newArray=[].concat(_toConsumableArray(Object(external_kbnSharedDeps_Lodash_["get"])(prevState,path)),[resolvedNewValue]);var newState=_toConsumableArray(prevState);Object(external_kbnSharedDeps_Lodash_["set"])(newState,path,newArray);return newState}}))}function removeElementFromArray(setStateCallback,path,index){setStateCallback((function(prevState){if(path.length===0){var newState=_toConsumableArray(prevState);newState.splice(index,1);return newState}else{var newArray=_toConsumableArray(Object(external_kbnSharedDeps_Lodash_["get"])(prevState,path));newArray.splice(index,1);var _newState=_toConsumableArray(prevState);Object(external_kbnSharedDeps_Lodash_["set"])(_newState,path,newArray);return _newState}}))}function stringToComboBoxOption(option){return{label:option}}function comboBoxOptionToString(option){return option.label}function appendOptionToComboBox(setStateFunc,path,newValue){appendElementToArray(setStateFunc,path,{label:newValue})}var appendOptionToComboBoxHandler=Object(external_kbnSharedDeps_Lodash_["curry"])(appendOptionToComboBox);var textmate=__webpack_require__(231);var json=__webpack_require__(232);function code_editor_slicedToArray(arr,i){return code_editor_arrayWithHoles(arr)||code_editor_iterableToArrayLimit(arr,i)||code_editor_unsupportedIterableToArray(arr,i)||code_editor_nonIterableRest()}function code_editor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function code_editor_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return code_editor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return code_editor_arrayLikeToArray(o,minLen)}function code_editor_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function code_editor_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function code_editor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function JsonCodeEditor(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState(props.initialValue),_React$useState2=code_editor_slicedToArray(_React$useState,2),value=_React$useState2[0],setValue=_React$useState2[1];var _React$useState3=external_kbnSharedDeps_React_default.a.useState(false),_React$useState4=code_editor_slicedToArray(_React$useState3,2),invalid=_React$useState4[0],setInvalid=_React$useState4[1];var onChange=function onChange(newValue){setValue(newValue);try{JSON.parse(newValue);props.handleCodeChange(newValue);props.handleCodeInvalid(false);setInvalid(false)}catch(e){setInvalid(true);props.handleCodeInvalid(true)}};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeEditor"],{mode:"json",theme:"textmate",width:"100%",height:"auto",showGutter:false,minLines:5,maxLines:25,setOptions:{showLineNumbers:false,tabSize:2},value:value,onChange:onChange}),invalid&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"danger"},external_kbnSharedDeps_React_default.a.createElement("small",null,props.errorMessage))))}var audit_logging_index=__webpack_require__(234);function edit_setting_group_toConsumableArray(arr){return edit_setting_group_arrayWithoutHoles(arr)||edit_setting_group_iterableToArray(arr)||edit_setting_group_unsupportedIterableToArray(arr)||edit_setting_group_nonIterableSpread()}function edit_setting_group_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function edit_setting_group_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return edit_setting_group_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return edit_setting_group_arrayLikeToArray(o,minLen)}function edit_setting_group_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function edit_setting_group_arrayWithoutHoles(arr){if(Array.isArray(arr))return edit_setting_group_arrayLikeToArray(arr)}function edit_setting_group_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var edit_setting_group_renderCodeBlock=function renderCodeBlock(setting){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],{paddingSize:"none",isCopyable:true},setting.code))};var displayLabel=function displayLabel(val){return val.replace(/\./g,":")};function EditSettingGroup(props){var renderField=function renderField(config,setting,handleChange,handleInvalid){var val=Object(external_kbnSharedDeps_Lodash_["get"])(config,setting.path);if(setting.type==="bool"){val=val||false;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:Object(display_utils["d"])(val),checked:val,onChange:function onChange(e){handleChange(setting.path,e.target.checked)}})}else if(setting.type==="array"&&typeof setting.options!=="undefined"){val=val||[];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:setting.title,options:setting.options.map(stringToComboBoxOption),selectedOptions:val.map(stringToComboBoxOption),onChange:function onChange(selectedOptions){handleChange(setting.path,selectedOptions.map(comboBoxOptionToString))}})}else if(setting.type==="array"){val=val||[];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{noSuggestions:true,placeholder:setting.title,selectedOptions:val.map(stringToComboBoxOption),onChange:function onChange(selectedOptions){handleChange(setting.path,selectedOptions.map(comboBoxOptionToString))},onCreateOption:function onCreateOption(searchValue){handleChange(setting.path,[].concat(edit_setting_group_toConsumableArray(val),[searchValue]))}})}else if(setting.type==="map"){var handleCodeChange=function handleCodeChange(newVal){var updated=JSON.parse(newVal);handleChange(setting.path,updated)};var handleCodeInvalid=function handleCodeInvalid(error){handleInvalid(setting.path,error)};var codeMap=Object(external_kbnSharedDeps_Lodash_["get"])(config,setting.path);var codeString;if(Object(external_kbnSharedDeps_Lodash_["isEmpty"])(codeMap)){codeString="{}"}else{codeString=Object(display_utils["f"])(codeMap)}return external_kbnSharedDeps_React_default.a.createElement(JsonCodeEditor,{initialValue:codeString,errorMessage:setting.error,handleCodeChange:handleCodeChange,handleCodeInvalid:handleCodeInvalid})}else{return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null)}};var settingGroup=props.settingGroup;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,settingGroup.title&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h3",null,settingGroup.title)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null)),settingGroup.settings.map((function(setting){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:setting.path},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,setting.title),description:external_kbnSharedDeps_React_default.a.createElement("div",{style:{maxWidth:"450px"}},setting.description,setting.code&&edit_setting_group_renderCodeBlock(setting)),fullWidth:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:displayLabel(setting.path)},renderField(props.config,setting,props.handleChange,props.handleInvalid))))})))}function toast_utils_slicedToArray(arr,i){return toast_utils_arrayWithHoles(arr)||toast_utils_iterableToArrayLimit(arr,i)||toast_utils_unsupportedIterableToArray(arr,i)||toast_utils_nonIterableRest()}function toast_utils_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function toast_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return toast_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return toast_utils_arrayLikeToArray(o,minLen)}function toast_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function toast_utils_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function toast_utils_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function createErrorToast(id,title,text){return{id:id,color:"danger",title:title,text:text}}function createUnknownErrorToast(id,failedAction){return createErrorToast(id,"Failed to ".concat(failedAction),"Failed to ".concat(failedAction,". You may refresh the page to retry or see browser console for more information."))}function useToastState(){var _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=toast_utils_slicedToArray(_useState,2),toasts=_useState2[0],setToasts=_useState2[1];var addToast=Object(external_kbnSharedDeps_React_["useCallback"])((function(toastToAdd){setToasts((function(state){return state.concat(toastToAdd)}))}),[]);var removeToast=function removeToast(toastToDelete){setToasts(toasts.filter((function(toast){return toast.id!==toastToDelete.id})))};return[toasts,addToast,removeToast]}function getSuccessToastMessage(resourceType,action,userName){switch(action){case"create":case"duplicate":return"".concat(resourceType,' "').concat(userName,'" successfully created');case"edit":return"".concat(resourceType,' "').concat(userName,'" successfully updated');default:return""}}function getValue(category,key){var item=sessionStorage.getItem("".concat(category,"::").concat(key));if(!item){return null}return JSON.parse(item)}function storage_utils_setValue(category,key,value){sessionStorage.setItem("".concat(category,"::").concat(key),JSON.stringify(value))}var TOAST_CATEGORY="toast";function setCrossPageToast(targetUrl,toast){storage_utils_setValue(TOAST_CATEGORY,targetUrl,toast)}function getAndClearCrossPageToast(targetUrl){var result=getValue(TOAST_CATEGORY,targetUrl);storage_utils_setValue(TOAST_CATEGORY,targetUrl,null);return result}function audit_logging_edit_settings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function audit_logging_edit_settings_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){audit_logging_edit_settings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){audit_logging_edit_settings_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function audit_logging_edit_settings_slicedToArray(arr,i){return audit_logging_edit_settings_arrayWithHoles(arr)||audit_logging_edit_settings_iterableToArrayLimit(arr,i)||audit_logging_edit_settings_unsupportedIterableToArray(arr,i)||audit_logging_edit_settings_nonIterableRest()}function audit_logging_edit_settings_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function audit_logging_edit_settings_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return audit_logging_edit_settings_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return audit_logging_edit_settings_arrayLikeToArray(o,minLen)}function audit_logging_edit_settings_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function audit_logging_edit_settings_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function audit_logging_edit_settings_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function AuditLoggingEditSettings(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState({}),_React$useState2=audit_logging_edit_settings_slicedToArray(_React$useState,2),editConfig=_React$useState2[0],setEditConfig=_React$useState2[1];var _useToastState=useToastState(),_useToastState2=audit_logging_edit_settings_slicedToArray(_useToastState,3),toasts=_useToastState2[0],addToast=_useToastState2[1],removeToast=_useToastState2[2];var _React$useState3=external_kbnSharedDeps_React_default.a.useState([]),_React$useState4=audit_logging_edit_settings_slicedToArray(_React$useState3,2),invalidSettings=_React$useState4[0],setInvalidSettings=_React$useState4[1];var handleChange=function handleChange(path,val){setEditConfig((function(previousEditedConfig){return Object(external_kbnSharedDeps_Lodash_["set"])(Object(external_kbnSharedDeps_Lodash_["cloneDeep"])(editConfig),path,val)}))};var handleInvalid=function handleInvalid(path,error){var invalid=Object(external_kbnSharedDeps_Lodash_["without"])(invalidSettings,path);if(error){invalid.push(path)}setInvalidSettings(invalid)};external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchConfig=function(){var _ref=audit_logging_edit_settings_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var fetchedConfig;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getAuditLogging(props.coreStart.http);case 3:fetchedConfig=_context.sent;setEditConfig(fetchedConfig);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);console.log(_context.t0);case 10:case"end":return _context.stop()}}}),_callee,null,[[0,7]])})));return function fetchConfig(){return _ref.apply(this,arguments)}}();fetchConfig()}),[props.coreStart.http]);var renderSaveAndCancel=function renderSaveAndCancel(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"cancel",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].auditLogging)}},"Cancel")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"save",fill:true,isDisabled:invalidSettings.length!==0,onClick:function onClick(){saveConfig(editConfig)}},"Save"))))};var saveConfig=function(){var _ref2=audit_logging_edit_settings_asyncToGenerator(regeneratorRuntime.mark((function _callee2(configToUpdate){var addSuccessToast,failureToast;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return updateAuditLogging(props.coreStart.http,configToUpdate);case 3:addSuccessToast=function addSuccessToast(text){var successToast={id:"update-result",color:"success",iconType:"check",title:"Success",text:text};setCrossPageToast(buildUrl(types["c"].auditLogging),successToast)};if(props.setting==="general"){addSuccessToast("General settings saved")}else{addSuccessToast("Compliance settings saved")}window.location.href=buildHashUrl(types["c"].auditLogging);_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](0);failureToast={id:"update-result",color:"danger",iconType:"alert",title:"Failed to update audit configuration due to "+(_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.message)};addToast(failureToast);case 12:_context2.prev=12;window.scrollTo({top:0});return _context2.finish(12);case 15:case"end":return _context2.stop()}}}),_callee2,null,[[0,8,12,15]])})));return function saveConfig(_x){return _ref2.apply(this,arguments)}}();var renderComplianceSetting=function renderComplianceSetting(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"Compliance settings"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(EditSettingGroup,{settingGroup:audit_logging_constants["a"].COMPLIANCE_CONFIG_MODE_SETTINGS,config:editConfig,handleChange:handleChange}),editConfig.compliance&&editConfig.compliance.enabled&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(EditSettingGroup,{settingGroup:audit_logging_constants["a"].COMPLIANCE_CONFIG_SETTINGS,config:editConfig,handleChange:handleChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(EditSettingGroup,{settingGroup:audit_logging_constants["a"].COMPLIANCE_SETTINGS_READ,config:editConfig,handleChange:handleChange,handleInvalid:handleInvalid}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(EditSettingGroup,{settingGroup:audit_logging_constants["a"].COMPLIANCE_SETTINGS_WRITE,config:editConfig,handleChange:handleChange}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),renderSaveAndCancel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,toastLifeTimeMs:1e4,dismissToast:removeToast}))};var renderGeneralSettings=function renderGeneralSettings(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"General settings"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(EditSettingGroup,{settingGroup:audit_logging_constants["a"].LAYER_SETTINGS,config:editConfig,handleChange:handleChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(EditSettingGroup,{settingGroup:audit_logging_constants["a"].ATTRIBUTE_SETTINGS,config:editConfig,handleChange:handleChange}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_kbnSharedDeps_React_default.a.createElement(EditSettingGroup,{settingGroup:audit_logging_constants["a"].IGNORE_SETTINGS,config:editConfig,handleChange:handleChange})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),renderSaveAndCancel(),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,toastLifeTimeMs:1e4,dismissToast:removeToast}))};var content;if(props.setting==="general"){content=renderGeneralSettings()}else{content=renderComplianceSetting()}return external_kbnSharedDeps_React_default.a.createElement("div",{className:"panel-restrict-width"},content)}function PanelWithHeader(props){var _props$count;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,props.headerText,props.optional&&external_kbnSharedDeps_React_default.a.createElement("i",null," - optional"),((_props$count=props.count)===null||_props$count===void 0?void 0:_props$count.toString())&&external_kbnSharedDeps_React_default.a.createElement("span",{className:"panel-header-count"}," (",props.count,")"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued",className:"panel-header-subtext"},props.headerSubText,props.helpLink&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null," ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:props.helpLink}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s"}),props.children)}var NO_ITEMS_FOUND_MESSAGE="No items found";var loadingSpinner=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"l"});function showTableStatusMessage(loading,items,customMessage){return loading?loadingSpinner:items.length===0&&(customMessage||NO_ITEMS_FOUND_MESSAGE)}function authentication_sequence_panel_slicedToArray(arr,i){return authentication_sequence_panel_arrayWithHoles(arr)||authentication_sequence_panel_iterableToArrayLimit(arr,i)||authentication_sequence_panel_unsupportedIterableToArray(arr,i)||authentication_sequence_panel_nonIterableRest()}function authentication_sequence_panel_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function authentication_sequence_panel_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return authentication_sequence_panel_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return authentication_sequence_panel_arrayLikeToArray(o,minLen)}function authentication_sequence_panel_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function authentication_sequence_panel_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function authentication_sequence_panel_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var authentication_sequence_panel_columns=[{field:"order",name:"Execution order",sortable:true},{field:"domain_name",name:"Domain name"},{field:"http_enabled",name:"HTTP"},{field:"transport_enabled",name:"TRANSPORT"},{field:"http_type",name:"HTTP type"},{field:"http_challenge",name:"HTTP challenge"},{field:"http_configuration",name:"HTTP configuration",render:function render(config){return Object(display_utils["h"])("HTTP configuration",config)}},{field:"backend_type",name:"Backend type"},{field:"backend_configuration",name:"Backend configuration",render:function render(config){return Object(display_utils["h"])("Backend configuration",config)}}];var ENABLED_STRING="Enabled";var DISABLED_STRING="Disabled";var TRUE_STRING="True";var FALSE_STRING="False";function AuthenticationSequencePanel(props){var _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=authentication_sequence_panel_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var domains=Object(external_kbnSharedDeps_Lodash_["keys"])(props.authc);var items=Object(external_kbnSharedDeps_Lodash_["map"])(domains,(function(domain){var data=Object(external_kbnSharedDeps_Lodash_["get"])(props.authc,domain);var httpAuthenticator=data.http_authenticator;var backend=data.authentication_backend;return{order:data.order,domain_name:domain,http_enabled:data.http_enabled?ENABLED_STRING:DISABLED_STRING,transport_enabled:data.transport_enabled?ENABLED_STRING:DISABLED_STRING,http_type:httpAuthenticator.type,http_challenge:httpAuthenticator.challenge?TRUE_STRING:FALSE_STRING,http_configuration:httpAuthenticator.config,backend_type:backend.type,backend_configuration:backend.config}}));var search={box:{placeholder:"Search authentication domain"},onChange:function onChange(arg){setQuery(arg.query);return true}};var headerText="Authentication sequences";return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:headerText,headerSubText:"An authentication module specifies where to get the user credentials from, and against which backend they should be authenticated. When there are multiple authentication domains, the plugin will authenticate the user sequentially against each backend until one succeeds.",helpLink:constants["m"].BackendConfigurationAuthenticationDoc,count:external_kbnSharedDeps_ElasticEui_["Query"].execute(query||"",items).length},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{tableLayout:"auto",columns:authentication_sequence_panel_columns,items:items,itemId:"domain_name",pagination:true,sorting:{sort:{field:"order",direction:"desc"}},search:search,message:showTableStatusMessage(props.loading,items)}))}function authorization_panel_slicedToArray(arr,i){return authorization_panel_arrayWithHoles(arr)||authorization_panel_iterableToArrayLimit(arr,i)||authorization_panel_unsupportedIterableToArray(arr,i)||authorization_panel_nonIterableRest()}function authorization_panel_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function authorization_panel_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return authorization_panel_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return authorization_panel_arrayLikeToArray(o,minLen)}function authorization_panel_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function authorization_panel_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function authorization_panel_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var authorization_panel_columns=[{field:"domain_name",name:"Domain name"},{field:"http_enabled",name:"HTTP"},{field:"transport_enabled",name:"TRANSPORT"},{field:"backend_type",name:"Backend type"},{field:"backend_configuration",name:"Backend configuration",render:function render(config){return Object(display_utils["h"])("Backend configuration",config)}}];var authorization_panel_ENABLED_STRING="Enabled";var authorization_panel_DISABLED_STRING="Disabled";function AuthorizationPanel(props){var _useState=Object(external_kbnSharedDeps_React_["useState"])(null),_useState2=authorization_panel_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var domains=Object(external_kbnSharedDeps_Lodash_["keys"])(props.authz);var items=Object(external_kbnSharedDeps_Lodash_["map"])(domains,(function(domain){var data=Object(external_kbnSharedDeps_Lodash_["get"])(props.authz,domain);var backend=data.authorization_backend;return{domain_name:domain,http_enabled:data.http_enabled?authorization_panel_ENABLED_STRING:authorization_panel_DISABLED_STRING,transport_enabled:data.transport_enabled?authorization_panel_ENABLED_STRING:authorization_panel_DISABLED_STRING,backend_type:backend.type,backend_configuration:backend.config}}));var search={box:{placeholder:"Search authorization domain"},onChange:function onChange(arg){setQuery(arg.query);return true}};var headerText="Authorization";var emptyListMessage=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,"No authorization"),titleSize:"s",actions:props.config.ui.backend_configurable&&external_kbnSharedDeps_React_default.a.createElement(display_utils["b"],{href:constants["m"].BackendConfigurationAuthorizationDoc,text:"Manage via config.yml"})});return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:headerText,headerSubText:"After the user authenticates, the security plugin can collect backend roles, such as LDAP groups, from authorization backends. These backends have no execution order; the plugin tries to collect backend roles from all of them.",helpLink:constants["m"].BackendConfigurationAuthorizationDoc,count:external_kbnSharedDeps_ElasticEui_["Query"].execute(query||"",items).length},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{tableLayout:"auto",columns:authorization_panel_columns,items:items,itemId:"domain_name",pagination:true,sorting:true,search:search,message:showTableStatusMessage(props.loading,items,emptyListMessage)}))}function auth_view_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function auth_view_utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){auth_view_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){auth_view_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getSecurityConfig(_x){return _getSecurityConfig.apply(this,arguments)}function _getSecurityConfig(){_getSecurityConfig=auth_view_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee(http){var rawSecurityConfig;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(request_utils["c"])(http,constants["j"]);case 2:rawSecurityConfig=_context.sent;return _context.abrupt("return",rawSecurityConfig.data.config.dynamic);case 4:case"end":return _context.stop()}}}),_callee)})));return _getSecurityConfig.apply(this,arguments)}function InstructionView(props){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"Authentication and authorization")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xxl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement("h2",null,"You have not set up authentication and authorization")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{textAlign:"center",size:"xs",color:"subdued",className:"instruction-text"},"In order to use Security plugin, you must decide on authentication ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"authc")," ","and authorization backends ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"authz"),". Use"," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"plugins/opendistro_security/securityconfig/config.yml")," to define how to retrieve and verify the user credentials, and how to fetch additional roles from backend system if needed."),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),props.config.ui.backend_configurable&&external_kbnSharedDeps_React_default.a.createElement("div",{style:{textAlign:"center"}},external_kbnSharedDeps_React_default.a.createElement(display_utils["b"],{fill:true,size:"s",href:constants["m"].BackendConfigurationDoc,text:"Create config.yml"})))}function auth_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function auth_view_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){auth_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){auth_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function auth_view_slicedToArray(arr,i){return auth_view_arrayWithHoles(arr)||auth_view_iterableToArrayLimit(arr,i)||auth_view_unsupportedIterableToArray(arr,i)||auth_view_nonIterableRest()}function auth_view_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function auth_view_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return auth_view_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return auth_view_arrayLikeToArray(o,minLen)}function auth_view_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function auth_view_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function auth_view_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function AuthView(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState([]),_React$useState2=auth_view_slicedToArray(_React$useState,2),authentication=_React$useState2[0],setAuthentication=_React$useState2[1];var _React$useState3=external_kbnSharedDeps_React_default.a.useState([]),_React$useState4=auth_view_slicedToArray(_React$useState3,2),authorization=_React$useState4[0],setAuthorization=_React$useState4[1];var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=auth_view_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchData=function(){var _ref=auth_view_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var config;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return getSecurityConfig(props.coreStart.http);case 4:config=_context.sent;setAuthentication(config.authc);setAuthorization(config.authz);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](0);console.log(_context.t0);case 12:_context.prev=12;setLoading(false);return _context.finish(12);case 15:case"end":return _context.stop()}}}),_callee,null,[[0,9,12,15]])})));return function fetchData(){return _ref.apply(this,arguments)}}();fetchData()}),[props.coreStart.http]);if(Object(external_kbnSharedDeps_Lodash_["isEmpty"])(authentication)){return external_kbnSharedDeps_React_default.a.createElement(InstructionView,{config:props.config})}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"Authentication and authorization")),props.config.ui.backend_configurable&&external_kbnSharedDeps_React_default.a.createElement(display_utils["b"],{href:constants["m"].BackendConfigurationDoc,text:"Manage via config.yml"})),external_kbnSharedDeps_React_default.a.createElement(AuthenticationSequencePanel,{authc:authentication,loading:loading}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(AuthorizationPanel,{authz:authorization,loading:loading,config:props.config}))}var get_started=__webpack_require__(243);var get_started_default=__webpack_require__.n(get_started);var addBackendStep={title:"Add backends",children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},"Add authentication",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"(authc)"),"and authorization",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"(authz)"),"information to",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"plugins/opendistro_security/securityconfig/config.yml"),". The",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"authc")," section contains the backends to check user credentials against. The ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCode"],null,"authz"),"section contains any backends to fetch backend roles from. The most common example of a backend role is an LDAP group. ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].AuthenticationFlowDoc})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",wrap:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(display_utils["b"],{fill:true,href:constants["m"].BackendConfigurationDoc,text:"Create config.yml"})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"review-authentication-and-authorization",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].auth)}},"Review authentication and authorization"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}))};var setOfSteps=[{title:"Create roles",children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},"Roles are reusable collections of permissions. The default roles are a great starting point, but you might need to create custom roles that meet your exact needs."," ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].CreateRolesDoc})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"explore-existing-roles",fill:true,onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles)}},"Explore existing roles")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"create-new-role",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles,types["a"].create)}},"Create new role"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}))},{title:"Map users",children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},"After a user successfully authenticates, the security plugin retrieves that user’s roles. You can map roles directly to users, but you can also map them to backend roles."," ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].MapUsersToRolesDoc})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"map-users-to-role",fill:true,onClick:function onClick(){window.location.href=buildHashUrl(types["c"].users)}},"Map users to a role")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"create-internal-user",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].users,types["a"].create)}},"Create internal user"))))}];function GetStarted(props){var steps;if(props.config.ui.backend_configurable){steps=[addBackendStep].concat(setOfSteps)}else{steps=setOfSteps}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("div",{className:"panel-restrict-width"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"Get started")),external_kbnSharedDeps_React_default.a.createElement(display_utils["b"],{text:"Open in new window",href:buildHashUrl()})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,"The Open Distro for Elasticsearch security plugin lets you define the API calls that users can make and the data they can access. The most basic configuration consists of these steps.")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),props.config.ui.backend_configurable&&external_kbnSharedDeps_React_default.a.createElement("div",{className:"text-center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiImage"],{size:"xl",alt:"Three steps to set up your security",url:get_started_default.a})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSteps"],{steps:steps})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,"Optional: Configure audit logs")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"audit.logs.introduction",defaultMessage:"Audit logs let you track user access to your Elasticsearch cluster and are useful for compliance purposes."})," ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].AuditLogsDoc})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"review-audit-log-configuration",fill:true,onClick:function onClick(){window.location.href=buildHashUrl(types["c"].auditLogging)}},"Review Audit Log Configuration"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"l"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,"Optional: Purge cache")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement("p",null,"By default, the security plugin caches authenticated users, along with their roles and permissions. This option will purge cached users, roles and permissions."),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{iconType:"refresh",fill:true,onClick:function onClick(){props.coreStart.http.delete(constants["d"])}},"Purge cache")))))}var resource_utils=__webpack_require__(34);function internal_user_detail_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function internal_user_detail_utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){internal_user_detail_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){internal_user_detail_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getUserDetail(_x,_x2){return _getUserDetail.apply(this,arguments)}function _getUserDetail(){_getUserDetail=internal_user_detail_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee(http,username){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(request_utils["c"])(http,Object(resource_utils["b"])(constants["e"],username));case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee)})));return _getUserDetail.apply(this,arguments)}function updateUser(_x3,_x4,_x5){return _updateUser.apply(this,arguments)}function _updateUser(){_updateUser=internal_user_detail_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee2(http,username,updateObject){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Object(request_utils["e"])(http,Object(resource_utils["b"])(constants["e"],username),updateObject);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2)})));return _updateUser.apply(this,arguments)}var form_row=__webpack_require__(28);var apps_constants=__webpack_require__(33);function password_edit_panel_slicedToArray(arr,i){return password_edit_panel_arrayWithHoles(arr)||password_edit_panel_iterableToArrayLimit(arr,i)||password_edit_panel_unsupportedIterableToArray(arr,i)||password_edit_panel_nonIterableRest()}function password_edit_panel_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function password_edit_panel_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return password_edit_panel_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return password_edit_panel_arrayLikeToArray(o,minLen)}function password_edit_panel_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function password_edit_panel_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function password_edit_panel_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function PasswordEditPanel(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState(""),_React$useState2=password_edit_panel_slicedToArray(_React$useState,2),password=_React$useState2[0],setPassword=_React$useState2[1];var _React$useState3=external_kbnSharedDeps_React_default.a.useState(""),_React$useState4=password_edit_panel_slicedToArray(_React$useState3,2),repeatPassword=_React$useState4[0],setRepeatPassword=_React$useState4[1];var _React$useState5=external_kbnSharedDeps_React_default.a.useState(false),_React$useState6=password_edit_panel_slicedToArray(_React$useState5,2),isRepeatPasswordInvalid=_React$useState6[0],setIsRepeatPasswordInvalid=_React$useState6[1];external_kbnSharedDeps_React_default.a.useEffect((function(){props.updatePassword(password);var isInvalid=repeatPassword!==password;setIsRepeatPasswordInvalid(isInvalid);props.updateIsInvalid(isInvalid)}),[password,props,repeatPassword]);var passwordChangeHandler=function passwordChangeHandler(e){setPassword(e.target.value)};var repeatPasswordChangeHandler=function repeatPasswordChangeHandler(e){setRepeatPassword(e.target.value)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Password",helpText:apps_constants["b"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"data-test-subj":"password",prepend:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"lock"}),type:"password",onChange:passwordChangeHandler})),external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Re-enter password",helpText:"The password must be identical to what you entered above."},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"data-test-subj":"re-enter-password",prepend:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"lock"}),type:"password",isInvalid:isRepeatPasswordInvalid,onChange:repeatPasswordChangeHandler})))}function attribute_panel_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function attribute_panel_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){attribute_panel_ownKeys(Object(source),true).forEach((function(key){attribute_panel_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{attribute_panel_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function attribute_panel_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function buildAttributeState(attributesDict){return Object(external_kbnSharedDeps_Lodash_["map"])(attributesDict,(function(v,k){return{key:k.toString(),value:v}}))}function unbuildAttributeState(attributesList){return attributesList.reduce((function(attributes,_ref){var key=_ref.key,value=_ref.value;return attribute_panel_objectSpread(attribute_panel_objectSpread({},attributes),{},{[key]:value})}),{})}function getEmptyAttribute(){return{key:"",value:""}}function generateAttributesPanels(userAttributes,setAttributes){var panels=userAttributes.map((function(userAttribute,arrayIndex){var onValueChangeHandler=function onValueChangeHandler(attributeToUpdate){return updateElementInArrayHandler(setAttributes,[arrayIndex,attributeToUpdate])};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:"attributes-".concat(arrayIndex)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:arrayIndex===0?"Variable name":""},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{id:"attribute-".concat(arrayIndex),value:userAttribute.key,onChange:function onChange(e){return onValueChangeHandler("key")(e.target.value)},placeholder:"Type in variable name"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:arrayIndex===0?"Value":""},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{id:"value-".concat(arrayIndex),value:userAttribute.value,onChange:function onChange(e){return onValueChangeHandler("value")(e.target.value)},placeholder:"Type in value"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{hasEmptyLabelSpace:arrayIndex===0?true:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"delete-".concat(arrayIndex),color:"danger",onClick:function onClick(){return removeElementFromArray(setAttributes,[],arrayIndex)}},"Remove")))))}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,panels)}function AttributePanel(props){var state=props.state,setState=props.setState;if(Object(external_kbnSharedDeps_Lodash_["isEmpty"])(state)){setState([getEmptyAttribute()])}return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:"Attributes",headerSubText:"Attributes can be used to further describe the user, and, more importantly they can be used as  variables in the Document Level Security query in the index permission of a role. This makes it possible to  write dynamic DLS queries based on a user's attributes.",helpLink:constants["m"].AttributeBasedSecurityDoc,optional:true},generateAttributesPanels(state,setState),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"add-row",onClick:function onClick(){appendElementToArray(setState,[],getEmptyAttribute())}},"Add another attribute"))}var common=__webpack_require__(11);var resource_validation_util_VALID_LENGTH_HELP_TEXT=function VALID_LENGTH_HELP_TEXT(resourceType){return"The ".concat(resourceType," name must contain from ").concat(constants["r"]," to ").concat(constants["q"]," characters.")};var VALID_CHARACTERS_HELP_TEXT="Valid characters are A-Z, a-z, 0-9, (_)underscore, (-) hyphen and unicode characters.";function validateResourceName(resourceType,resourceName){var errors=[];if(!isResourceNameLengthValid(resourceName)){errors.push(resource_validation_util_VALID_LENGTH_HELP_TEXT(resourceType))}if(!Object(common["j"])(resourceName)){errors.push("Invalid characters found in ".concat(resourceType," name. ").concat(VALID_CHARACTERS_HELP_TEXT))}return errors}function isResourceNameLengthValid(resourceName){if(resourceName.length<constants["r"]||resourceName.length>constants["q"])return false;return true}function resourceNameHelpText(resourceType){return"".concat(resource_validation_util_VALID_LENGTH_HELP_TEXT(resourceType)," ").concat(VALID_CHARACTERS_HELP_TEXT)}function name_row_slicedToArray(arr,i){return name_row_arrayWithHoles(arr)||name_row_iterableToArrayLimit(arr,i)||name_row_unsupportedIterableToArray(arr,i)||name_row_nonIterableRest()}function name_row_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function name_row_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return name_row_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return name_row_arrayLikeToArray(o,minLen)}function name_row_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function name_row_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function name_row_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function NameRow(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState([]),_React$useState2=name_row_slicedToArray(_React$useState,2),errors=_React$useState2[0],setErrors=_React$useState2[1];var validateName=function validateName(){var errorMessages=validateResourceName(props.resourceType,props.resourceName);props.setIsFormValid(!(errorMessages.length>0));setErrors(errorMessages)};return external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:props.headerText,headerSubText:props.headerSubText,helpText:resourceNameHelpText(props.resourceType),isInvalid:errors.length>0,error:errors},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{"data-test-subj":"name-text",fullWidth:props.fullWidth,value:props.resourceName,onChange:function onChange(e){props.setNameState(e.target.value)},onBlur:function onBlur(){validateName()},disabled:props.action==="edit",isInvalid:errors.length>0}))}var error_utils=__webpack_require__(22);function generateBackendRolesPanels(backendRoles,setBackendRoles){var panels=backendRoles.map((function(backendRole,arrayIndex){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:"backend-role-".concat(arrayIndex)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:constants["p"]},external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:arrayIndex===0?"Backend role":""},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{id:"backend-role-".concat(arrayIndex),value:backendRole,onChange:function onChange(e){return updateElementInArrayHandler(setBackendRoles,[arrayIndex])(e.target.value)},placeholder:"Type in backend role"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{hasEmptyLabelSpace:arrayIndex===0?true:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"backend-role-delete-".concat(arrayIndex),color:"danger",onClick:function onClick(){return removeElementFromArray(setBackendRoles,[],arrayIndex)}},"Remove")))))}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,panels)}function BackendRolePanel(props){var state=props.state,setState=props.setState;if(Object(external_kbnSharedDeps_Lodash_["isEmpty"])(state)){setState([""])}return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:"Backend roles",headerSubText:"Backend roles are used to map users from external authentication systems, such as LDAP or SAML to Open Distro security roles.",helpLink:constants["m"].AttributeBasedSecurityDoc,optional:true},generateBackendRolesPanels(state,setState),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"backend-role-add-row",onClick:function onClick(){appendElementToArray(setState,[],"")}},"Add another backend role"))}function internal_user_edit_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function internal_user_edit_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){internal_user_edit_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){internal_user_edit_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function internal_user_edit_slicedToArray(arr,i){return internal_user_edit_arrayWithHoles(arr)||internal_user_edit_iterableToArrayLimit(arr,i)||internal_user_edit_unsupportedIterableToArray(arr,i)||internal_user_edit_nonIterableRest()}function internal_user_edit_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function internal_user_edit_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return internal_user_edit_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return internal_user_edit_arrayLikeToArray(o,minLen)}function internal_user_edit_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function internal_user_edit_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function internal_user_edit_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var TITLE_TEXT_DICT={create:"Create internal user",edit:"Edit internal user",duplicate:"Duplicate internal user"};function InternalUserEdit(props){var _useState=Object(external_kbnSharedDeps_React_["useState"])(""),_useState2=internal_user_edit_slicedToArray(_useState,2),userName=_useState2[0],setUserName=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(""),_useState4=internal_user_edit_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _React$useState=external_kbnSharedDeps_React_default.a.useState(false),_React$useState2=internal_user_edit_slicedToArray(_React$useState,2),isPasswordInvalid=_React$useState2[0],setIsPasswordInvalid=_React$useState2[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])([]),_useState6=internal_user_edit_slicedToArray(_useState5,2),attributes=_useState6[0],setAttributes=_useState6[1];var _useState7=Object(external_kbnSharedDeps_React_["useState"])([]),_useState8=internal_user_edit_slicedToArray(_useState7,2),backendRoles=_useState8[0],setBackendRoles=_useState8[1];var _useToastState=useToastState(),_useToastState2=internal_user_edit_slicedToArray(_useToastState,3),toasts=_useToastState2[0],addToast=_useToastState2[1],removeToast=_useToastState2[2];var _useState9=Object(external_kbnSharedDeps_React_["useState"])(true),_useState10=internal_user_edit_slicedToArray(_useState9,2),isFormValid=_useState10[0],setIsFormValid=_useState10[1];external_kbnSharedDeps_React_default.a.useEffect((function(){var action=props.action;if(action==="edit"||action==="duplicate"){var fetchData=function(){var _ref=internal_user_edit_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var user;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getUserDetail(props.coreStart.http,props.sourceUserName);case 3:user=_context.sent;setAttributes(buildAttributeState(user.attributes));setBackendRoles(user.backend_roles);setUserName(Object(resource_utils["a"])(action,props.sourceUserName));_context.next=13;break;case 9:_context.prev=9;_context.t0=_context["catch"](0);addToast(createUnknownErrorToast("fetchUser","load data"));console.error(_context.t0);case 13:case"end":return _context.stop()}}}),_callee,null,[[0,9]])})));return function fetchData(){return _ref.apply(this,arguments)}}();fetchData()}}),[addToast,props.action,props.coreStart.http,props.sourceUserName]);var updateUserHandler=function(){var _ref2=internal_user_edit_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var validAttributes,updateObject;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!isPasswordInvalid){_context2.next=4;break}addToast(createErrorToast("passwordInvalid","Update error","Password does not match."));return _context2.abrupt("return");case 4:if(!(password===""&&props.action!=="edit")){_context2.next=7;break}addToast(createErrorToast("emptyPassword","Update error","Password is required."));return _context2.abrupt("return");case 7:validAttributes=attributes.filter((function(v){return v.key!==""}));updateObject={backend_roles:backendRoles,attributes:unbuildAttributeState(validAttributes)};if(password!==""){updateObject.password=password}_context2.next=12;return updateUser(props.coreStart.http,userName,updateObject);case 12:setCrossPageToast(buildUrl(types["c"].users),{id:"updateUserSucceeded",color:"success",title:getSuccessToastMessage("User",props.action,userName)});window.location.href=buildHashUrl(types["c"].users);_context2.next=19;break;case 16:_context2.prev=16;_context2.t0=_context2["catch"](0);addToast(createErrorToast("updateUserFailed","Update error",Object(error_utils["a"])(_context2.t0,"")));case 19:case"end":return _context2.stop()}}}),_callee2,null,[[0,16]])})));return function updateUserHandler(){return _ref2.apply(this,arguments)}}();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,props.buildBreadcrumbs(TITLE_TEXT_DICT[props.action]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",gutterSize:"xs"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,TITLE_TEXT_DICT[props.action]))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},"The security plugin includes an internal user database. Use this database in place of, or in addition to, an external authentication system such as LDAP or Active Directory."," ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].UsersAndRolesDoc}))))),external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:"Credentials"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(NameRow,{headerText:"Username",headerSubText:"Specify a descriptive and unique user name. You cannot edit the name once the user is created.",resourceName:userName,resourceType:"user",action:props.action,setNameState:setUserName,setIsFormValid:setIsFormValid}),external_kbnSharedDeps_React_default.a.createElement(PasswordEditPanel,{updatePassword:setPassword,updateIsInvalid:setIsPasswordInvalid}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(BackendRolePanel,{state:backendRoles,setState:setBackendRoles}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(AttributePanel,{state:attributes,setState:setAttributes}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){window.location.href=buildHashUrl(types["c"].users)}},"Cancel")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"submit",fill:true,onClick:updateUserHandler,disabled:!isFormValid},props.action==="edit"?"Save changes":"Create"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,toastLifeTimeMs:1e4,dismissToast:removeToast}))}function buildTreeItems(items){return[{name:"Security",id:"security",items:items.map((function(e){return{id:e.name,name:e.name,href:"#"+e.href,isSelected:window.location.hash.includes(e.href)}}))}]}function NavPanel(props){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSideNav"],{items:buildTreeItems(props.items)})}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=action_groups_utils_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function action_groups_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return action_groups_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return action_groups_utils_arrayLikeToArray(o,minLen)}function action_groups_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function action_groups_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function action_groups_utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){action_groups_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){action_groups_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function fetchActionGroups(_x){return _fetchActionGroups.apply(this,arguments)}function _fetchActionGroups(){_fetchActionGroups=action_groups_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee(http){var actiongroups;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(request_utils["c"])(http,constants["a"]);case 2:actiongroups=_context.sent;return _context.abrupt("return",actiongroups.data);case 4:case"end":return _context.stop()}}}),_callee)})));return _fetchActionGroups.apply(this,arguments)}function transformActionGroupsToListingFormat(rawData){return Object(external_kbnSharedDeps_Lodash_["map"])(rawData,(function(value,key){return{name:key||"",type:"Action group",reserved:value.reserved,allowedActions:value.allowed_actions,hasClusterPermission:value.type==="cluster"||value.type==="all",hasIndexPermission:value.type==="index"||value.type==="all"}}))}function fetchActionGroupListing(_x2){return _fetchActionGroupListing.apply(this,arguments)}function _fetchActionGroupListing(){_fetchActionGroupListing=action_groups_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee2(http){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=transformActionGroupsToListingFormat;_context2.next=3;return fetchActionGroups(http);case 3:_context2.t1=_context2.sent;return _context2.abrupt("return",(0,_context2.t0)(_context2.t1));case 5:case"end":return _context2.stop()}}}),_callee2)})));return _fetchActionGroupListing.apply(this,arguments)}function getClusterSinglePermissions(){return constants["l"].map((function(permission){return{name:permission,type:"Single permission",reserved:true,allowedActions:[],hasClusterPermission:true,hasIndexPermission:false}}))}function getIndexSinglePermissions(){return constants["n"].map((function(permission){return{name:permission,type:"Single permission",reserved:true,allowedActions:[],hasClusterPermission:false,hasIndexPermission:true}}))}function getAllPermissionsListing(_x3){return _getAllPermissionsListing.apply(this,arguments)}function _getAllPermissionsListing(){_getAllPermissionsListing=action_groups_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee3(http){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.t0=mergeAllPermissions;_context3.next=3;return fetchActionGroups(http);case 3:_context3.t1=_context3.sent;return _context3.abrupt("return",(0,_context3.t0)(_context3.t1));case 5:case"end":return _context3.stop()}}}),_callee3)})));return _getAllPermissionsListing.apply(this,arguments)}function mergeAllPermissions(_x4){return _mergeAllPermissions.apply(this,arguments)}function _mergeAllPermissions(){_mergeAllPermissions=action_groups_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee4(actionGroups){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",transformActionGroupsToListingFormat(actionGroups).concat(getClusterSinglePermissions()).concat(getIndexSinglePermissions()));case 1:case"end":return _context4.stop()}}}),_callee4)})));return _mergeAllPermissions.apply(this,arguments)}function updateActionGroup(_x5,_x6,_x7){return _updateActionGroup.apply(this,arguments)}function _updateActionGroup(){_updateActionGroup=action_groups_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee5(http,groupName,updateObject){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return Object(request_utils["e"])(http,Object(resource_utils["b"])(constants["a"],groupName),updateObject);case 2:return _context5.abrupt("return",_context5.sent);case 3:case"end":return _context5.stop()}}}),_callee5)})));return _updateActionGroup.apply(this,arguments)}function requestDeleteActionGroups(_x8,_x9){return _requestDeleteActionGroups.apply(this,arguments)}function _requestDeleteActionGroups(){_requestDeleteActionGroups=action_groups_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee6(http,groups){var _iterator,_step,group;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_iterator=_createForOfIteratorHelper(groups);_context6.prev=1;_iterator.s();case 3:if((_step=_iterator.n()).done){_context6.next=9;break}group=_step.value;_context6.next=7;return Object(request_utils["a"])(http,Object(resource_utils["b"])(constants["a"],group));case 7:_context6.next=3;break;case 9:_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6["catch"](1);_iterator.e(_context6.t0);case 14:_context6.prev=14;_iterator.f();return _context6.finish(14);case 17:case"end":return _context6.stop()}}}),_callee6,null,[[1,11,14,17]])})));return _requestDeleteActionGroups.apply(this,arguments)}function edit_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function edit_modal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){edit_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){edit_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function edit_modal_slicedToArray(arr,i){return edit_modal_arrayWithHoles(arr)||edit_modal_iterableToArrayLimit(arr,i)||edit_modal_unsupportedIterableToArray(arr,i)||edit_modal_nonIterableRest()}function edit_modal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function edit_modal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return edit_modal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return edit_modal_arrayLikeToArray(o,minLen)}function edit_modal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function edit_modal_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function edit_modal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var TITLE_DICT={[types["a"].create]:"Create new action group",[types["a"].edit]:"Edit action group",[types["a"].duplicate]:"Duplicate action group"};function PermissionEditModal(props){var _useState=Object(external_kbnSharedDeps_React_["useState"])(props.groupName),_useState2=edit_modal_slicedToArray(_useState,2),groupName=_useState2[0],setGroupName=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(props.allowedActions.map(stringToComboBoxOption)),_useState4=edit_modal_slicedToArray(_useState3,2),allowedActions=_useState4[0],setAllowedActions=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])(true),_useState6=edit_modal_slicedToArray(_useState5,2),isFormValid=_useState6[0],setIsFormValid=_useState6[1];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:props.handleClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,TITLE_DICT[props.action])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(NameRow,{headerText:"Name",headerSubText:"Enter a unique name to describe the purpose of this group. You cannot change the name after creation.",resourceName:groupName,resourceType:"",action:props.action,setNameState:setGroupName,setIsFormValid:setIsFormValid}),external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Permissions"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{options:props.optionUniverse,selectedOptions:allowedActions,onCreateOption:appendOptionToComboBoxHandler(setAllowedActions,[]),onChange:setAllowedActions})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:props.handleClose},"Cancel"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"submit",onClick:edit_modal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return props.handleSave(groupName,allowedActions.map(comboBoxOptionToString));case 2:case"end":return _context.stop()}}}),_callee)}))),fill:true,disabled:!isFormValid},props.action===types["a"].create?"Create":"Save"))))}var permission_tree_index=__webpack_require__(244);var MAX_DEPTH=5;function buildTreeItem(name,depth,actionGroups){var _actionGroups$name,_children;var children=null;if(depth<MAX_DEPTH)children=(_actionGroups$name=actionGroups[name])===null||_actionGroups$name===void 0?void 0:_actionGroups$name.allowed_actions;return{label:name,id:name,icon:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs"},"•"),children:(_children=children)===null||_children===void 0?void 0:_children.map((function(child){return buildTreeItem(child,depth+1,actionGroups)})),className:Object(external_kbnSharedDeps_Lodash_["isEmpty"])(children)?"tree-leaf-node":""}}function PermissionTree(props){return external_kbnSharedDeps_React_default.a.createElement("div",{className:"permission-tree-container"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTreeView"],{display:"compressed","aria-label":"Permission tree",showExpansionArrows:true,items:props.permissions.map((function(permission){return buildTreeItem(permission,0,props.actionGroups)}))}))}function delete_confirm_modal_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function delete_confirm_modal_utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){delete_confirm_modal_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){delete_confirm_modal_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function delete_confirm_modal_utils_slicedToArray(arr,i){return delete_confirm_modal_utils_arrayWithHoles(arr)||delete_confirm_modal_utils_iterableToArrayLimit(arr,i)||delete_confirm_modal_utils_unsupportedIterableToArray(arr,i)||delete_confirm_modal_utils_nonIterableRest()}function delete_confirm_modal_utils_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function delete_confirm_modal_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return delete_confirm_modal_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return delete_confirm_modal_utils_arrayLikeToArray(o,minLen)}function delete_confirm_modal_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function delete_confirm_modal_utils_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function delete_confirm_modal_utils_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function useDeleteConfirmState(handleDelete,entity,customConfirmationText){var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=delete_confirm_modal_utils_slicedToArray(_useState,2),isDeleteConfirmModalVisible=_useState2[0],setIsDeleteConfirmModalVisible=_useState2[1];var closeDeleteConfirmModal=function closeDeleteConfirmModal(){return setIsDeleteConfirmModalVisible(false)};var showDeleteConfirmModal=function showDeleteConfirmModal(){return setIsDeleteConfirmModalVisible(true)};var handleConfirm=function(){var _ref=delete_confirm_modal_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return handleDelete();case 2:closeDeleteConfirmModal();case 3:case"end":return _context.stop()}}}),_callee)})));return function handleConfirm(){return _ref.apply(this,arguments)}}();var deleteConfirmModal;if(isDeleteConfirmModalVisible){deleteConfirmModal=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:"Confirm Delete",onCancel:closeDeleteConfirmModal,onConfirm:handleConfirm,cancelButtonText:"Cancel",confirmButtonText:"Confirm",defaultFocusedButton:"confirm"},customConfirmationText?customConfirmationText:external_kbnSharedDeps_React_default.a.createElement("p",null,"Do you really want to delete selected ",entity,"?")))}return[showDeleteConfirmModal,deleteConfirmModal]}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function context_menu_slicedToArray(arr,i){return context_menu_arrayWithHoles(arr)||context_menu_iterableToArrayLimit(arr,i)||context_menu_unsupportedIterableToArray(arr,i)||context_menu_nonIterableRest()}function context_menu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function context_menu_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return context_menu_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return context_menu_arrayLikeToArray(o,minLen)}function context_menu_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function context_menu_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function context_menu_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function useContextMenuState(buttonText,buttonProps,children){var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=context_menu_slicedToArray(_useState,2),isContextMenuOpen=_useState2[0],setContextMenuOpen=_useState2[1];var closeContextMenu=function closeContextMenu(){return setContextMenuOpen(false)};var button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],_extends({iconType:"arrowDown",iconSide:"right",onClick:function onClick(){setContextMenuOpen(true)}},buttonProps),buttonText);var items=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",alignItems:"flexStart",gutterSize:"s"},children.map((function(child,index){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{key:index},child)})))];var component=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:buttonText,button:button,isOpen:isContextMenuOpen,closePopover:closeContextMenu,panelPaddingSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiContextMenuPanel"],{items:items,hasFocus:false}));return[component,closeContextMenu]}function permission_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function permission_list_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){permission_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){permission_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function permission_list_slicedToArray(arr,i){return permission_list_arrayWithHoles(arr)||permission_list_iterableToArrayLimit(arr,i)||permission_list_unsupportedIterableToArray(arr,i)||permission_list_nonIterableRest()}function permission_list_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function permission_list_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return permission_list_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return permission_list_arrayLikeToArray(o,minLen)}function permission_list_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function permission_list_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function permission_list_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function permission_list_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function permission_list_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){permission_list_ownKeys(Object(source),true).forEach((function(key){permission_list_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{permission_list_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function permission_list_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function renderBooleanToCheckMark(value){return value?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiIcon"],{type:"check"}):""}function toggleRowDetails(item,actionGroupDict,setItemIdToExpandedRowMap){setItemIdToExpandedRowMap((function(prevState){var itemIdToExpandedRowMapValues=permission_list_objectSpread({},prevState);if(itemIdToExpandedRowMapValues[item.name]){delete itemIdToExpandedRowMapValues[item.name]}else{itemIdToExpandedRowMapValues[item.name]=external_kbnSharedDeps_React_default.a.createElement(PermissionTree,{permissions:item.allowedActions,actionGroups:actionGroupDict})}return itemIdToExpandedRowMapValues}))}function renderRowExpanstionArrow(itemIdToExpandedRowMap,actionGroupDict,setItemIdToExpandedRowMap){return function(item){return item.type==="Action group"&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:function onClick(){return toggleRowDetails(item,actionGroupDict,setItemIdToExpandedRowMap)},"aria-label":itemIdToExpandedRowMap[item.name]?"Collapse":"Expand",iconType:itemIdToExpandedRowMap[item.name]?"arrowUp":"arrowDown"})}}function getColumns(itemIdToExpandedRowMap,actionGroupDict,setItemIdToExpandedRowMap){return[{field:"name",name:"Name",sortable:true},{field:"type",name:"Type",sortable:true},{field:"hasClusterPermission",name:"Cluster permission",render:renderBooleanToCheckMark},{field:"hasIndexPermission",name:"Index permission",render:renderBooleanToCheckMark},{field:"reserved",name:"Customization",render:function render(reserved){return Object(display_utils["g"])(reserved,display_utils["j"])}},{align:external_kbnSharedDeps_ElasticEui_["RIGHT_ALIGNMENT"],width:"40px",isExpander:true,render:renderRowExpanstionArrow(itemIdToExpandedRowMap,actionGroupDict,setItemIdToExpandedRowMap)}]}var SEARCH_OPTIONS={box:{placeholder:"Search for action group name or permission name"},filters:[{type:"field_value_selection",field:"type",name:"All types",options:[{value:"Action group"},{value:"Single permission"}],multiSelect:false},{type:"field_value_selection",name:"All permissions",options:[{field:"hasClusterPermission",name:"Cluster permissions",value:true},{field:"hasIndexPermission",name:"Index permissions",value:true}]},{type:"field_value_selection",field:"reserved",name:"Customization",multiSelect:false,options:[{value:true,view:Object(display_utils["g"])(true,display_utils["j"])},{value:false,view:Object(display_utils["g"])(false,display_utils["j"])}]}]};function PermissionList(props){var _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=permission_list_slicedToArray(_useState,2),permissionList=_useState2[0],setPermissionList=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])({}),_useState4=permission_list_slicedToArray(_useState3,2),actionGroupDict=_useState4[0],setActionGroupDict=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])(false),_useState6=permission_list_slicedToArray(_useState5,2),errorFlag=_useState6[0],setErrorFlag=_useState6[1];var _React$useState=external_kbnSharedDeps_React_default.a.useState([]),_React$useState2=permission_list_slicedToArray(_React$useState,2),selection=_React$useState2[0],setSelection=_React$useState2[1];var _useState7=Object(external_kbnSharedDeps_React_["useState"])({}),_useState8=permission_list_slicedToArray(_useState7,2),itemIdToExpandedRowMap=_useState8[0],setItemIdToExpandedRowMap=_useState8[1];var _useState9=Object(external_kbnSharedDeps_React_["useState"])(null),_useState10=permission_list_slicedToArray(_useState9,2),editModal=_useState10[0],setEditModal=_useState10[1];var _useToastState=useToastState(),_useToastState2=permission_list_slicedToArray(_useToastState,3),toasts=_useToastState2[0],addToast=_useToastState2[1],removeToast=_useToastState2[2];var _useState11=Object(external_kbnSharedDeps_React_["useState"])(false),_useState12=permission_list_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var _useState13=Object(external_kbnSharedDeps_React_["useState"])(null),_useState14=permission_list_slicedToArray(_useState13,2),query=_useState14[0],setQuery=_useState14[1];var fetchData=Object(external_kbnSharedDeps_React_["useCallback"])(permission_list_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var actionGroups;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return fetchActionGroups(props.coreStart.http);case 4:actionGroups=_context.sent;setActionGroupDict(actionGroups);_context.t0=setPermissionList;_context.next=9;return mergeAllPermissions(actionGroups);case 9:_context.t1=_context.sent;(0,_context.t0)(_context.t1);_context.next=17;break;case 13:_context.prev=13;_context.t2=_context["catch"](0);console.log(_context.t2);setErrorFlag(true);case 17:_context.prev=17;setLoading(false);return _context.finish(17);case 20:case"end":return _context.stop()}}}),_callee,null,[[0,13,17,20]])}))),[props.coreStart.http]);external_kbnSharedDeps_React_default.a.useEffect((function(){fetchData()}),[props.coreStart.http,fetchData]);var handleDelete=function(){var _ref2=permission_list_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var groupsToDelete;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:groupsToDelete=selection.map((function(r){return r.name}));_context2.prev=1;_context2.next=4;return requestDeleteActionGroups(props.coreStart.http,groupsToDelete);case 4:setPermissionList(Object(external_kbnSharedDeps_Lodash_["difference"])(permissionList,selection));setSelection([]);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](1);console.log(_context2.t0);case 11:_context2.prev=11;closeActionsMenu();return _context2.finish(11);case 14:case"end":return _context2.stop()}}}),_callee2,null,[[1,8,11,14]])})));return function handleDelete(){return _ref2.apply(this,arguments)}}();var _useDeleteConfirmStat=useDeleteConfirmState(handleDelete,"action group(s)"),_useDeleteConfirmStat2=permission_list_slicedToArray(_useDeleteConfirmStat,2),showDeleteConfirmModal=_useDeleteConfirmStat2[0],deleteConfirmModal=_useDeleteConfirmStat2[1];var actionsMenuItems=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{id:"edit",key:"edit",onClick:function onClick(){return showEditModal(selection[0].name,types["a"].edit,selection[0].allowedActions)},disabled:selection.length!==1||selection[0].reserved},"Edit"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{id:"duplicate",key:"duplicate",onClick:function onClick(){return showEditModal(Object(resource_utils["a"])(types["a"].duplicate,selection[0].name),types["a"].duplicate,selection[0].allowedActions)},disabled:selection.length!==1||selection[0].type!=="Action group"},"Duplicate"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{key:"delete",color:"danger",onClick:showDeleteConfirmModal,disabled:selection.length===0||selection.some((function(group){return group.reserved}))},"Delete")];var _useContextMenuState=useContextMenuState("Actions",{},actionsMenuItems),_useContextMenuState2=permission_list_slicedToArray(_useContextMenuState,2),actionsMenu=_useContextMenuState2[0],closeActionsMenu=_useContextMenuState2[1];var showEditModal=function showEditModal(initialGroupName,action,initialAllowedAction){setEditModal(external_kbnSharedDeps_React_default.a.createElement(PermissionEditModal,{groupName:initialGroupName,action:action,allowedActions:initialAllowedAction,optionUniverse:permissionList.map((function(group){return stringToComboBoxOption(group.name)})),handleClose:function handleClose(){return setEditModal(null)},handleSave:function(){var _ref3=permission_list_asyncToGenerator(regeneratorRuntime.mark((function _callee3(groupName,allowedAction){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return updateActionGroup(props.coreStart.http,groupName,{allowed_actions:allowedAction});case 3:setEditModal(null);fetchData();addToast({id:"saveSucceeded",title:getSuccessToastMessage("Action group",action,groupName),color:"success"});_context3.next=13;break;case 8:_context3.prev=8;_context3.t0=_context3["catch"](0);console.log(_context3.t0);setEditModal(null);addToast({id:"saveFailed",title:"Failed to save ".concat(action," group. You may refresh the page to retry or see browser console for more information."),color:"danger"});case 13:case"end":return _context3.stop()}}}),_callee3,null,[[0,8]])})));return function(_x,_x2){return _ref3.apply(this,arguments)}}()}))};var createActionGroupMenuItems=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{key:"create-from-blank",onClick:function onClick(){return showEditModal("",types["a"].create,[])}},"Create from blank"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{key:"create-from-selection",id:"create-from-selection",onClick:function onClick(){return showEditModal("",types["a"].create,selection.map((function(item){return item.name})))},disabled:selection.length===0},"Create from selection")];var _useContextMenuState3=useContextMenuState("Create action group",{fill:true},createActionGroupMenuItems),_useContextMenuState4=permission_list_slicedToArray(_useContextMenuState3,1),createActionGroupMenu=_useContextMenuState4[0];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"Permissions"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,"Permissions",external_kbnSharedDeps_React_default.a.createElement("span",{className:"panel-header-count"}," ","(",external_kbnSharedDeps_ElasticEui_["Query"].execute(query||"",permissionList).length,")"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},"Permissions are individual actions, such as cluster:admin/snapshot/restore, which lets you restore snapshots. Action groups are reusable collections of permissions, such as MANAGE_SNAPSHOTS, which lets you view, take, delete, and restore snapshots. You can often meet your security needs using the default action groups, but you might find it convenient to create your own. ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].PermissionsDoc}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,actionsMenu),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,createActionGroupMenu)))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{tableLayout:"auto",loading:permissionList===[]&&!errorFlag,columns:getColumns(itemIdToExpandedRowMap,actionGroupDict,setItemIdToExpandedRowMap),items:permissionList,itemId:"name",pagination:true,search:permission_list_objectSpread(permission_list_objectSpread({},SEARCH_OPTIONS),{},{onChange:function onChange(arg){setQuery(arg.query);return true}}),selection:{onSelectionChange:setSelection},sorting:{sort:{field:"type",direction:"asc"}},error:errorFlag?"Load data failed, please check console log for more detail.":"",isExpandable:true,itemIdToExpandedRowMap:itemIdToExpandedRowMap,message:showTableStatusMessage(loading,permissionList)}))),editModal,deleteConfirmModal,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,toastLifeTimeMs:1e4,dismissToast:removeToast}))}function role_detail_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function role_detail_utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){role_detail_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){role_detail_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getRoleDetail(_x,_x2){return _getRoleDetail.apply(this,arguments)}function _getRoleDetail(){_getRoleDetail=role_detail_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee(http,roleName){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(request_utils["c"])(http,Object(resource_utils["b"])(constants["h"],roleName));case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee)})));return _getRoleDetail.apply(this,arguments)}function updateRole(_x3,_x4,_x5){return _updateRole.apply(this,arguments)}function _updateRole(){_updateRole=role_detail_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee2(http,roleName,updateObject){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Object(request_utils["e"])(http,Object(resource_utils["b"])(constants["h"],roleName),updateObject);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2)})));return _updateRole.apply(this,arguments)}var tenant_utils=__webpack_require__(20);function ClusterPermissionPanel(props){var state=props.state,optionUniverse=props.optionUniverse,setState=props.setState;return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:"Cluster permissions",headerSubText:"Specify how users in this role can access the cluster. By default, no cluster permission is granted.",helpLink:constants["m"].ClusterPermissionsDoc},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Cluster Permissions",headerSubText:"Specify permissions using either action groups or single permissions. An action group is a list of single permissions. You can often achieve your desired security posture using some combination of the default permission groups. You can also create your own reusable permission groups."},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:constants["p"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:"Search for action group name or permission name",options:optionUniverse,selectedOptions:state,onChange:setState})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(display_utils["b"],{href:buildHashUrl(types["c"].permissions),text:"Create new permission group"}))))))}function index_permission_utils_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function index_permission_utils_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){index_permission_utils_ownKeys(Object(source),true).forEach((function(key){index_permission_utils_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{index_permission_utils_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function index_permission_utils_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getFieldLevelSecurityMethod(fieldLevelSecurityRawFields){return fieldLevelSecurityRawFields.some((function(s){return s.startsWith("~")}))?"exclude":"include"}function transformRoleIndexPermissions(roleIndexPermission){return Object(external_kbnSharedDeps_Lodash_["map"])(roleIndexPermission,(function(indexPermission,arrayIndex){return index_permission_utils_objectSpread({id:arrayIndex},indexPermission)}))}function getEmptyIndexPermission(){return{indexPatterns:[],allowedActions:[],docLevelSecurity:"",fieldLevelSecurityMethod:"exclude",fieldLevelSecurityFields:[],maskedFields:[]}}function getFieldLevelSecurityFields(fieldLevelSecurityRawFields){return fieldLevelSecurityRawFields.map((function(s){return s.replace(/^~/,"")})).map(stringToComboBoxOption)}function packFieldLevelSecurity(method,fieldOptions){var fields=fieldOptions.map(comboBoxOptionToString);if(method==="include"){return fields}return fields.map((function(field){return"~"+field}))}function buildIndexPermissionState(indexPerm){return indexPerm.map((function(perm){return{indexPatterns:perm.index_patterns.map(stringToComboBoxOption),allowedActions:perm.allowed_actions.map(stringToComboBoxOption),docLevelSecurity:perm.dls,fieldLevelSecurityMethod:getFieldLevelSecurityMethod(perm.fls),fieldLevelSecurityFields:getFieldLevelSecurityFields(perm.fls),maskedFields:perm.masked_fields.map(stringToComboBoxOption)}}))}function unbuildIndexPermissionState(indexPerm){return indexPerm.map((function(perm){return{index_patterns:perm.indexPatterns.map(comboBoxOptionToString),dls:perm.docLevelSecurity,fls:packFieldLevelSecurity(perm.fieldLevelSecurityMethod,perm.fieldLevelSecurityFields),masked_fields:perm.maskedFields.map(comboBoxOptionToString),allowed_actions:perm.allowedActions.map(comboBoxOptionToString)}}))}var FIELD_LEVEL_SECURITY_PLACEHOLDER='{\n    "bool": {\n        "must": {\n            "match": {\n                "genres": "Comedy"\n            }\n        }\n    }\n}';function IndexPatternRow(props){return external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Index",helpText:"Specify index pattern using *"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{noSuggestions:true,placeholder:"Search for index name or type in index pattern",selectedOptions:props.value,onChange:props.onChangeHandler,onCreateOption:props.onCreateHandler}))}function IndexPermissionRow(props){return external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Index permissions",headerSubText:"You can specify permissions using both action groups or single permissions.  A permission group is a list of single permissions. You can often achieve your desired security posture using some combination of the default permission groups.  You can also create your own reusable permission groups."},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{className:constants["p"]},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:"Search for action group name or permission name",options:props.permisionOptionsSet,selectedOptions:props.value,onChange:props.onChangeHandler})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(display_utils["b"],{href:buildHashUrl(types["c"].permissions),text:"Create new permission group"}))))}function DocLevelSecurityRow(props){return external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Document level security",headerSubText:"You can restrict a role to a subset of documents in an index.",helpLink:constants["m"].DocumentLevelSecurityDoc,optional:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{placeholder:FIELD_LEVEL_SECURITY_PLACEHOLDER,value:props.value,onChange:props.onChangeHandler}))}function FieldLevelSecurityRow(props){return external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Field level security",headerSubText:"You can restrict what document fields a user can see. If you use field-level security in conjunction with document-level security, make sure you don't restrict access to the field that document-level security uses.",optional:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{valueOfSelected:props.method,options:[{inputDisplay:"Include",value:"include"},{inputDisplay:"Exclude",value:"exclude"}],onChange:props.onMethodChangeHandler})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:9},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{noSuggestions:true,placeholder:"Type in field name",selectedOptions:props.fields,onChange:props.onFieldChangeHandler,onCreateOption:props.onFieldCreateHandler}))))}function AnonymizationRow(props){return external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Anonymization",headerSubText:"Masks any sensitive fields with a random value to protect your data security.",optional:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{noSuggestions:true,placeholder:"Type in field name",selectedOptions:props.value,onChange:props.onChangeHandler,onCreateOption:props.onCreateHandler}))}function generateIndexPermissionPanels(indexPermissions,permisionOptionsSet,setRoleIndexPermission){var panels=indexPermissions.map((function(permission,arrayIndex){var onValueChangeHandler=function onValueChangeHandler(attributeToUpdate){return updateElementInArrayHandler(setRoleIndexPermission,[arrayIndex,attributeToUpdate])};var onCreateOptionHandler=function onCreateOptionHandler(attributeToUpdate){return appendOptionToComboBoxHandler(setRoleIndexPermission,[arrayIndex,attributeToUpdate])};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:"index-permission-".concat(arrayIndex)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiAccordion"],{id:"index-permission-".concat(arrayIndex),initialIsOpen:arrayIndex===0,buttonContent:permission.indexPatterns.map(comboBoxOptionToString).join(", ")||"Add index permission",extraAction:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"danger",onClick:function onClick(){return removeElementFromArray(setRoleIndexPermission,[],arrayIndex)}},"Remove")},external_kbnSharedDeps_React_default.a.createElement(IndexPatternRow,{value:permission.indexPatterns,onChangeHandler:onValueChangeHandler("indexPatterns"),onCreateHandler:onCreateOptionHandler("indexPatterns")}),external_kbnSharedDeps_React_default.a.createElement(IndexPermissionRow,{value:permission.allowedActions,permisionOptionsSet:permisionOptionsSet,onChangeHandler:onValueChangeHandler("allowedActions")}),external_kbnSharedDeps_React_default.a.createElement(DocLevelSecurityRow,{value:permission.docLevelSecurity,onChangeHandler:function onChangeHandler(e){return onValueChangeHandler("docLevelSecurity")(e.target.value)}}),external_kbnSharedDeps_React_default.a.createElement(FieldLevelSecurityRow,{method:permission.fieldLevelSecurityMethod,fields:permission.fieldLevelSecurityFields,onMethodChangeHandler:onValueChangeHandler("fieldLevelSecurityMethod"),onFieldChangeHandler:onValueChangeHandler("fieldLevelSecurityFields"),onFieldCreateHandler:onCreateOptionHandler("fieldLevelSecurityFields")}),external_kbnSharedDeps_React_default.a.createElement(AnonymizationRow,{value:permission.maskedFields,onChangeHandler:onValueChangeHandler("maskedFields"),onCreateHandler:onCreateOptionHandler("maskedFields")})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],null))}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,panels)}function IndexPermissionPanel(props){var state=props.state,optionUniverse=props.optionUniverse,setState=props.setState;if(Object(external_kbnSharedDeps_Lodash_["isEmpty"])(state)){setState([getEmptyIndexPermission()])}return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:"Index permissions",headerSubText:"Index permissions allow you to specify how users in this role can access the specific indices. By default, no index permission is granted.",helpLink:constants["m"].IndexPermissionsDoc},generateIndexPermissionPanels(state,optionUniverse,setState),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){appendElementToArray(setState,[],getEmptyIndexPermission())}},"Add another index permission"))}function buildTenantPermissionState(permissions){return permissions.map((function(permission){var permissionType=Object(tenant_utils["f"])(permission.allowed_actions);return{tenantPatterns:permission.tenant_patterns.map(stringToComboBoxOption),permissionType:permissionType}}))}var TENANT_PERMISSION_TYPE_DICT={[types["e"].ReadWrite]:[constants["u"]],[types["e"].Read]:[constants["t"]],[types["e"].None]:[]};function unbuildTenantPermissionState(permissions){return permissions.map((function(permission){return{tenant_patterns:permission.tenantPatterns.map(comboBoxOptionToString),allowed_actions:TENANT_PERMISSION_TYPE_DICT[permission.permissionType]}}))}function getEmptyTenantPermission(){return{tenantPatterns:[],permissionType:types["e"].ReadWrite}}function generateTenantPermissionPanels(tenantPermissions,permisionOptionsSet,setPermissions){var panels=tenantPermissions.map((function(tenantPermission,arrayIndex){var onValueChangeHandler=function onValueChangeHandler(attributeToUpdate){return updateElementInArrayHandler(setPermissions,[arrayIndex,attributeToUpdate])};var onCreateOptionHandler=function onCreateOptionHandler(attributeToUpdate){return appendOptionToComboBoxHandler(setPermissions,[arrayIndex,attributeToUpdate])};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:"tenant-permission-".concat(arrayIndex)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:"400px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:"Search tenant name or add a tenant pattern",selectedOptions:tenantPermission.tenantPatterns,onChange:onValueChangeHandler("tenantPatterns"),onCreateOption:onCreateOptionHandler("tenantPatterns"),options:permisionOptionsSet})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:"170px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSuperSelect"],{valueOfSelected:tenantPermission.permissionType,onChange:onValueChangeHandler("permissionType"),options:[{inputDisplay:types["e"].Read,value:types["e"].Read},{inputDisplay:types["e"].ReadWrite,value:types["e"].ReadWrite}]})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{color:"danger",onClick:function onClick(){return removeElementFromArray(setPermissions,[],arrayIndex)}},"Remove"))))}));return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,panels)}function TenantPanel(props){var state=props.state,optionUniverse=props.optionUniverse,setState=props.setState;if(Object(external_kbnSharedDeps_Lodash_["isEmpty"])(state)){setState([getEmptyTenantPermission()])}return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:"Tenant permissions",headerSubText:"Tenants are useful for safely sharing your work with other Kibana users. You can control which roles have access to a tenant and whether those roles have read and/or write access.",helpLink:constants["m"].TenantPermissionsDoc},external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Tenant"},generateTenantPermissionPanels(state,optionUniverse,setState)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){appendElementToArray(setState,[],getEmptyTenantPermission())}},"Add another tenant permission"))}function role_edit_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function role_edit_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){role_edit_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){role_edit_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function role_edit_slicedToArray(arr,i){return role_edit_arrayWithHoles(arr)||role_edit_iterableToArrayLimit(arr,i)||role_edit_unsupportedIterableToArray(arr,i)||role_edit_nonIterableRest()}function role_edit_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function role_edit_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return role_edit_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return role_edit_arrayLikeToArray(o,minLen)}function role_edit_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function role_edit_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function role_edit_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var role_edit_TITLE_TEXT_DICT={create:"Create Role",edit:"Edit Role",duplicate:"Duplicate Role"};function RoleEdit(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState(""),_React$useState2=role_edit_slicedToArray(_React$useState,2),roleName=_React$useState2[0],setRoleName=_React$useState2[1];var _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=role_edit_slicedToArray(_useState,2),roleClusterPermission=_useState2[0],setRoleClusterPermission=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=role_edit_slicedToArray(_useState3,2),roleIndexPermission=_useState4[0],setRoleIndexPermission=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])([]),_useState6=role_edit_slicedToArray(_useState5,2),roleTenantPermission=_useState6[0],setRoleTenantPermission=_useState6[1];var _useToastState=useToastState(),_useToastState2=role_edit_slicedToArray(_useToastState,3),toasts=_useToastState2[0],addToast=_useToastState2[1],removeToast=_useToastState2[2];var _useState7=Object(external_kbnSharedDeps_React_["useState"])(true),_useState8=role_edit_slicedToArray(_useState7,2),isFormValid=_useState8[0],setIsFormValid=_useState8[1];external_kbnSharedDeps_React_default.a.useEffect((function(){var action=props.action;if(action==="edit"||action==="duplicate"){var fetchData=function(){var _ref=role_edit_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var roleData;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getRoleDetail(props.coreStart.http,props.sourceRoleName);case 3:roleData=_context.sent;setRoleClusterPermission(roleData.cluster_permissions.map(stringToComboBoxOption));setRoleIndexPermission(buildIndexPermissionState(roleData.index_permissions));setRoleTenantPermission(buildTenantPermissionState(roleData.tenant_permissions));setRoleName(Object(resource_utils["a"])(action,props.sourceRoleName));_context.next=14;break;case 10:_context.prev=10;_context.t0=_context["catch"](0);addToast(createUnknownErrorToast("fetchRole","load data"));console.error(_context.t0);case 14:case"end":return _context.stop()}}}),_callee,null,[[0,10]])})));return function fetchData(){return _ref.apply(this,arguments)}}();fetchData()}}),[addToast,props.action,props.coreStart.http,props.sourceRoleName]);var _useState9=Object(external_kbnSharedDeps_React_["useState"])([]),_useState10=role_edit_slicedToArray(_useState9,2),actionGroups=_useState10[0],setActionGroups=_useState10[1];external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchActionGroupNames=function(){var _ref2=role_edit_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var actionGroupsObject;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetchActionGroups(props.coreStart.http);case 3:actionGroupsObject=_context2.sent;setActionGroups(Object.keys(actionGroupsObject));_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2["catch"](0);addToast(createUnknownErrorToast("actionGroup","load data"));console.error(_context2.t0);case 11:case"end":return _context2.stop()}}}),_callee2,null,[[0,7]])})));return function fetchActionGroupNames(){return _ref2.apply(this,arguments)}}();fetchActionGroupNames()}),[addToast,props.coreStart.http]);var _React$useState3=external_kbnSharedDeps_React_default.a.useState([]),_React$useState4=role_edit_slicedToArray(_React$useState3,2),tenantNames=_React$useState4[0],setTenantNames=_React$useState4[1];external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchTenantNames=function(){var _ref3=role_edit_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.t0=setTenantNames;_context3.next=4;return Object(tenant_utils["d"])(props.coreStart.http);case 4:_context3.t1=_context3.sent;(0,_context3.t0)(_context3.t1);_context3.next=12;break;case 8:_context3.prev=8;_context3.t2=_context3["catch"](0);addToast(createUnknownErrorToast("tenant","load data"));console.error(_context3.t2);case 12:case"end":return _context3.stop()}}}),_callee3,null,[[0,8]])})));return function fetchTenantNames(){return _ref3.apply(this,arguments)}}();fetchTenantNames()}),[addToast,props.coreStart.http]);var updateRoleHandler=function(){var _ref4=role_edit_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var validIndexPermission,validTenantPermission;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;validIndexPermission=roleIndexPermission.filter((function(v){return!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(v.indexPatterns)}));validTenantPermission=roleTenantPermission.filter((function(v){return!Object(external_kbnSharedDeps_Lodash_["isEmpty"])(v.tenantPatterns)}));_context4.next=5;return updateRole(props.coreStart.http,roleName,{cluster_permissions:roleClusterPermission.map(comboBoxOptionToString),index_permissions:unbuildIndexPermissionState(validIndexPermission),tenant_permissions:unbuildTenantPermissionState(validTenantPermission)});case 5:setCrossPageToast(buildUrl(types["c"].roles,types["a"].view,roleName),{id:"updateRoleSucceeded",color:"success",title:getSuccessToastMessage("Role",props.action,roleName)});window.location.href=buildHashUrl(types["c"].roles,types["a"].view,roleName);_context4.next=13;break;case 9:_context4.prev=9;_context4.t0=_context4["catch"](0);addToast(createUnknownErrorToast("updateRole","".concat(props.action," role")));console.error(_context4.t0);case 13:case"end":return _context4.stop()}}}),_callee4,null,[[0,9]])})));return function updateRoleHandler(){return _ref4.apply(this,arguments)}}();var clusterWisePermissionOptions=[{label:"Permission groups",options:actionGroups.map(stringToComboBoxOption)},{label:"Cluster permissions",options:constants["l"].map(stringToComboBoxOption)},{label:"Index permissions",options:constants["n"].map(stringToComboBoxOption)}];var tenantOptions=tenantNames.map(stringToComboBoxOption);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,props.buildBreadcrumbs(role_edit_TITLE_TEXT_DICT[props.action]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued",className:"panel-header-subtext"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",null,role_edit_TITLE_TEXT_DICT[props.action])),"Roles are the core way of controlling access to your cluster. Roles contain any combination of cluster-wide permission, index-specific permissions, document- and field-level security, and tenants. Once you've created the role, you can map users to the roles so that users gain those permissions."," ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].UsersAndRolesDoc}))),external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:"Name"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(NameRow,{headerText:"Name",headerSubText:"Specify a descriptive and unique role name. You cannot edit the name once the role is created.",resourceName:roleName,resourceType:"role",action:props.action,setNameState:setRoleName,setIsFormValid:setIsFormValid}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(ClusterPermissionPanel,{state:roleClusterPermission,setState:setRoleClusterPermission,optionUniverse:clusterWisePermissionOptions}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(IndexPermissionPanel,{state:roleIndexPermission,setState:setRoleIndexPermission,optionUniverse:clusterWisePermissionOptions}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(TenantPanel,{state:roleTenantPermission,setState:setRoleTenantPermission,optionUniverse:tenantOptions}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles)}},"Cancel")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:updateRoleHandler,disabled:!isFormValid},props.action==="edit"?"Update":"Create"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,toastLifeTimeMs:1e4,dismissToast:removeToast}))}function role_list_utils_createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=role_list_utils_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function role_list_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return role_list_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return role_list_utils_arrayLikeToArray(o,minLen)}function role_list_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function role_list_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function role_list_utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){role_list_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){role_list_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function transformRoleData(rawRoleData,rawRoleMappingData){return Object(external_kbnSharedDeps_Lodash_["map"])(rawRoleData.data,(function(v,k){var _rawRoleMappingData$d,_rawRoleMappingData$d2;return{roleName:k||"",reserved:v.reserved,clusterPermissions:v.cluster_permissions,indexPermissions:Object(external_kbnSharedDeps_Lodash_["chain"])(v.index_permissions).map("index_patterns").flatten().compact().value(),tenantPermissions:Object(external_kbnSharedDeps_Lodash_["chain"])(v.tenant_permissions).map("tenant_patterns").flatten().compact().value(),internalUsers:((_rawRoleMappingData$d=rawRoleMappingData.data[k||""])===null||_rawRoleMappingData$d===void 0?void 0:_rawRoleMappingData$d.users)||[],backendRoles:((_rawRoleMappingData$d2=rawRoleMappingData.data[k||""])===null||_rawRoleMappingData$d2===void 0?void 0:_rawRoleMappingData$d2.backend_roles)||[]}}))}function buildSearchFilterOptions(roleList,attrName){return Object(external_kbnSharedDeps_Lodash_["chain"])(roleList).map(attrName).flatten().compact().uniq().sortBy().map((function(e){return{value:e}})).value()}function requestDeleteRoles(_x,_x2){return _requestDeleteRoles.apply(this,arguments)}function _requestDeleteRoles(){_requestDeleteRoles=role_list_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee(http,roles){var _iterator,_step,role;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_iterator=role_list_utils_createForOfIteratorHelper(roles);_context.prev=1;_iterator.s();case 3:if((_step=_iterator.n()).done){_context.next=11;break}role=_step.value;_context.next=7;return Object(request_utils["a"])(http,Object(resource_utils["b"])(constants["h"],role));case 7:_context.next=9;return Object(request_utils["b"])(http,Object(resource_utils["b"])(constants["i"],role),[404]);case 9:_context.next=3;break;case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context["catch"](1);_iterator.e(_context.t0);case 16:_context.prev=16;_iterator.f();return _context.finish(16);case 19:case"end":return _context.stop()}}}),_callee,null,[[1,13,16,19]])})));return _requestDeleteRoles.apply(this,arguments)}function fetchRole(http){return Object(request_utils["c"])(http,constants["h"])}function fetchRoleMapping(http){return Object(request_utils["c"])(http,constants["i"])}function role_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function role_list_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){role_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){role_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function role_list_slicedToArray(arr,i){return role_list_arrayWithHoles(arr)||role_list_iterableToArrayLimit(arr,i)||role_list_unsupportedIterableToArray(arr,i)||role_list_nonIterableRest()}function role_list_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function role_list_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return role_list_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return role_list_arrayLikeToArray(o,minLen)}function role_list_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function role_list_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function role_list_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var role_list_columns=[{field:"roleName",name:"Role",render:function render(text){return external_kbnSharedDeps_React_default.a.createElement("a",{href:buildHashUrl(types["c"].roles,types["a"].view,text)},text)},sortable:true},{field:"clusterPermissions",name:"Cluster permissions",render:Object(display_utils["k"])(display_utils["j"]),truncateText:true},{field:"indexPermissions",name:"Index permissions",render:Object(display_utils["k"])(display_utils["j"]),truncateText:true},{field:"internalUsers",name:"Internal users",render:Object(display_utils["k"])(display_utils["j"])},{field:"backendRoles",name:"Backend roles",render:Object(display_utils["k"])(display_utils["j"])},{field:"tenantPermissions",name:"Tenants",render:Object(display_utils["k"])(display_utils["j"])},{field:"reserved",name:"Customization",render:function render(reserved){return Object(display_utils["g"])(reserved,display_utils["j"])}}];function RoleList(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState([]),_React$useState2=role_list_slicedToArray(_React$useState,2),roleData=_React$useState2[0],setRoleData=_React$useState2[1];var _React$useState3=external_kbnSharedDeps_React_default.a.useState(false),_React$useState4=role_list_slicedToArray(_React$useState3,2),errorFlag=_React$useState4[0],setErrorFlag=_React$useState4[1];var _React$useState5=external_kbnSharedDeps_React_default.a.useState([]),_React$useState6=role_list_slicedToArray(_React$useState5,2),selection=_React$useState6[0],setSelection=_React$useState6[1];var _useState=Object(external_kbnSharedDeps_React_["useState"])(false),_useState2=role_list_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchData=function(){var _ref=role_list_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var rawRoleData,rawRoleMappingData,processedData;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return fetchRole(props.coreStart.http);case 4:rawRoleData=_context.sent;_context.next=7;return fetchRoleMapping(props.coreStart.http);case 7:rawRoleMappingData=_context.sent;processedData=transformRoleData(rawRoleData,rawRoleMappingData);setRoleData(processedData);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](0);console.log(_context.t0);setErrorFlag(true);case 16:_context.prev=16;setLoading(false);return _context.finish(16);case 19:case"end":return _context.stop()}}}),_callee,null,[[0,12,16,19]])})));return function fetchData(){return _ref.apply(this,arguments)}}();fetchData()}),[props.coreStart.http]);var handleDelete=function(){var _ref2=role_list_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var rolesToDelete;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:rolesToDelete=selection.map((function(r){return r.roleName}));_context2.prev=1;_context2.next=4;return requestDeleteRoles(props.coreStart.http,rolesToDelete);case 4:setRoleData(Object(external_kbnSharedDeps_Lodash_["difference"])(roleData,selection));setSelection([]);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](1);console.log(_context2.t0);case 11:_context2.prev=11;closeActionsMenu();return _context2.finish(11);case 14:case"end":return _context2.stop()}}}),_callee2,null,[[1,8,11,14]])})));return function handleDelete(){return _ref2.apply(this,arguments)}}();var _useDeleteConfirmStat=useDeleteConfirmState(handleDelete,"role(s)"),_useDeleteConfirmStat2=role_list_slicedToArray(_useDeleteConfirmStat,2),showDeleteConfirmModal=_useDeleteConfirmStat2[0],deleteConfirmModal=_useDeleteConfirmStat2[1];var actionsMenuItems=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"edit",key:"edit",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles,types["a"].edit,selection[0].roleName)},disabled:selection.length!==1||selection[0].reserved},"Edit"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"duplicate",key:"duplicate",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles,types["a"].duplicate,selection[0].roleName)},disabled:selection.length!==1},"Duplicate"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{key:"delete",color:"danger",onClick:showDeleteConfirmModal,disabled:selection.length===0||selection.some((function(e){return e.reserved}))},"Delete")];var _useContextMenuState=useContextMenuState("Actions",{},actionsMenuItems),_useContextMenuState2=role_list_slicedToArray(_useContextMenuState,2),actionsMenu=_useContextMenuState2[0],closeActionsMenu=_useContextMenuState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])({}),_useState4=role_list_slicedToArray(_useState3,2),searchOptions=_useState4[0],setSearchOptions=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])(null),_useState6=role_list_slicedToArray(_useState5,2),query=_useState6[0],setQuery=_useState6[1];Object(external_kbnSharedDeps_React_["useEffect"])((function(){setSearchOptions({onChange:function onChange(arg){setQuery(arg.query);return true},filters:[{type:"field_value_selection",field:"clusterPermissions",name:"Cluster permissions",multiSelect:"or",options:buildSearchFilterOptions(roleData,"clusterPermissions")},{type:"field_value_selection",field:"indexPermissions",name:"Index permissions",multiSelect:"or",options:buildSearchFilterOptions(roleData,"indexPermissions")},{type:"field_value_selection",field:"internalUsers",name:"Internal users",multiSelect:"or",options:buildSearchFilterOptions(roleData,"internalUsers")},{type:"field_value_selection",field:"backendRoles",name:"Backend roles",multiSelect:"or",options:buildSearchFilterOptions(roleData,"backendRoles")},{type:"field_value_selection",field:"tenantPermissions",name:"Tenants",multiSelect:"or",options:buildSearchFilterOptions(roleData,"tenantPermissions")},{type:"field_value_selection",field:"reserved",name:"Customization",multiSelect:false,options:[{value:true,view:Object(display_utils["g"])(true,display_utils["j"])},{value:false,view:Object(display_utils["g"])(false,display_utils["j"])}]}]})}),[roleData]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"Roles"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],{id:"role-table-container"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,"Roles",external_kbnSharedDeps_React_default.a.createElement("span",{className:"panel-header-count"}," ","(",external_kbnSharedDeps_ElasticEui_["Query"].execute(query||"",roleData).length,")"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},"Roles are the core way of controlling access to your cluster. Roles contain any combination of cluster-wide permission, index-specific permissions, document- and field-level security, and tenants. Then you map users to these roles so that users gain those permissions. ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].UsersAndRolesDoc}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,actionsMenu),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,href:buildHashUrl(types["c"].roles,types["a"].create)},"Create role"))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{"data-test-subj":"role-list",tableLayout:"auto",loading:roleData===[]&&!errorFlag,columns:role_list_columns,items:roleData,itemId:"roleName",pagination:true,selection:{onSelectionChange:setSelection},sorting:true,search:searchOptions,error:errorFlag?"Load data failed, please check console log for more detail.":"",message:showTableStatusMessage(loading,roleData)})),deleteConfirmModal))}function InternalUsersPanel(props){var state=props.state,optionUniverse=props.optionUniverse,setState=props.setState;return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:"Users",headerSubText:"You can create an internal user in internal user database of the security plugin. An internal user can have its own backend role and host for an external authentication and authorization. External users from your identity provider are also supported.",helpLink:constants["m"].CreateUsersDoc},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Users",helpText:"Look up by user name. You can also create new internal user or enter external user."},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:"400px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{options:optionUniverse,selectedOptions:state,onChange:setState,onCreateOption:appendOptionToComboBoxHandler(setState,[])})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(display_utils["b"],{text:"Create new internal user",href:buildHashUrl(types["c"].users,types["a"].create)}))))))}function unbuildExternalIdentityState(externalIdentities){return externalIdentities.map((function(item){return item.externalIdentity}))}function buildExternalIdentityState(externalIdentities){return Object(external_kbnSharedDeps_Lodash_["map"])(externalIdentities,(function(externalIdentity){return{externalIdentity:externalIdentity}}))}function getEmptyExternalIdentity(){return{externalIdentity:""}}function ExternalIdentitiesPanel(props){var externalIdentities=props.externalIdentities,setExternalIdentities=props.setExternalIdentities;if(Object(external_kbnSharedDeps_Lodash_["isEmpty"])(externalIdentities)){setExternalIdentities([getEmptyExternalIdentity()])}var panel=externalIdentities.map((function(externalIdentity,arrayIndex){var onValueChangeHandler=function onValueChangeHandler(externalIdentityToUpdate){return updateElementInArrayHandler(setExternalIdentities,[arrayIndex,externalIdentityToUpdate])};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],{key:"externalIdentity-".concat(arrayIndex)},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{style:{maxWidth:"400px"}},external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:arrayIndex===0?"Backend roles":""},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFieldText"],{id:"externalIdentity-".concat(arrayIndex),value:externalIdentity.externalIdentity,onChange:function onChange(e){return onValueChangeHandler("externalIdentity")(e.target.value)},placeholder:"Type in backend role"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{hasEmptyLabelSpace:arrayIndex===0?true:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"remove-".concat(arrayIndex),color:"danger",onClick:function onClick(){return removeElementFromArray(setExternalIdentities,[],arrayIndex)}},"Remove")))))}));return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:"Backend roles",headerSubText:"Use a backend role to directly map to roles through an external authentication system.",helpLink:constants["m"].CreateUsersDoc},panel,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"add-row",onClick:function onClick(){appendElementToArray(setExternalIdentities,[],getEmptyExternalIdentity())}},"Add another backend role"))}function internal_user_list_utils_createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=internal_user_list_utils_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function internal_user_list_utils_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return internal_user_list_utils_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return internal_user_list_utils_arrayLikeToArray(o,minLen)}function internal_user_list_utils_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function internal_user_list_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function internal_user_list_utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){internal_user_list_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){internal_user_list_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function transformUserData(rawData){return Object(external_kbnSharedDeps_Lodash_["map"])(rawData,(function(value,key){return{username:key||"",attributes:value.attributes,backend_roles:value.backend_roles}}))}function requestDeleteUsers(_x,_x2){return _requestDeleteUsers.apply(this,arguments)}function _requestDeleteUsers(){_requestDeleteUsers=internal_user_list_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee(http,users){var _iterator,_step,user;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_iterator=internal_user_list_utils_createForOfIteratorHelper(users);_context.prev=1;_iterator.s();case 3:if((_step=_iterator.n()).done){_context.next=9;break}user=_step.value;_context.next=7;return Object(request_utils["a"])(http,Object(resource_utils["b"])(constants["e"],user));case 7:_context.next=3;break;case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context["catch"](1);_iterator.e(_context.t0);case 14:_context.prev=14;_iterator.f();return _context.finish(14);case 17:case"end":return _context.stop()}}}),_callee,null,[[1,11,14,17]])})));return _requestDeleteUsers.apply(this,arguments)}function getUserListRaw(_x3){return _getUserListRaw.apply(this,arguments)}function _getUserListRaw(){_getUserListRaw=internal_user_list_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee2(http){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Object(request_utils["c"])(http,constants["e"]);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2)})));return _getUserListRaw.apply(this,arguments)}function getUserList(_x4){return _getUserList.apply(this,arguments)}function _getUserList(){_getUserList=internal_user_list_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee3(http){var rawData;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getUserListRaw(http);case 2:rawData=_context3.sent;return _context3.abrupt("return",transformUserData(rawData.data));case 4:case"end":return _context3.stop()}}}),_callee3)})));return _getUserList.apply(this,arguments)}function fetchUserNameList(_x5){return _fetchUserNameList.apply(this,arguments)}function _fetchUserNameList(){_fetchUserNameList=internal_user_list_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee4(http){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.t0=Object;_context4.next=3;return getUserListRaw(http);case 3:_context4.t1=_context4.sent.data;return _context4.abrupt("return",_context4.t0.keys.call(_context4.t0,_context4.t1));case 5:case"end":return _context4.stop()}}}),_callee4)})));return _fetchUserNameList.apply(this,arguments)}function role_mapping_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function role_mapping_utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){role_mapping_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){role_mapping_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var UserType;(function(UserType){UserType["internal"]="User";UserType["external"]="Backend role"})(UserType||(UserType={}));function getRoleMappingData(_x,_x2){return _getRoleMappingData.apply(this,arguments)}function _getRoleMappingData(){_getRoleMappingData=role_mapping_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee(http,roleName){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",Object(request_utils["d"])(http,Object(resource_utils["b"])(constants["i"],roleName),[404]));case 1:case"end":return _context.stop()}}}),_callee)})));return _getRoleMappingData.apply(this,arguments)}function transformRoleMappingData(rawData){var internalUsers=Object(external_kbnSharedDeps_Lodash_["map"])(rawData.users,(function(mappedUser){return{userName:mappedUser,userType:UserType.internal}}));var externalIdentity=Object(external_kbnSharedDeps_Lodash_["map"])(rawData.backend_roles,(function(mappedExternalIdentity){return{userName:mappedExternalIdentity,userType:UserType.external}}));return internalUsers.concat(externalIdentity)}function updateRoleMapping(_x3,_x4,_x5){return _updateRoleMapping.apply(this,arguments)}function _updateRoleMapping(){_updateRoleMapping=role_mapping_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee2(http,roleName,updateObject){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Object(request_utils["e"])(http,Object(resource_utils["b"])(constants["i"],roleName),updateObject);case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2)})));return _updateRoleMapping.apply(this,arguments)}function role_edit_mapped_user_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function role_edit_mapped_user_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){role_edit_mapped_user_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){role_edit_mapped_user_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function role_edit_mapped_user_slicedToArray(arr,i){return role_edit_mapped_user_arrayWithHoles(arr)||role_edit_mapped_user_iterableToArrayLimit(arr,i)||role_edit_mapped_user_unsupportedIterableToArray(arr,i)||role_edit_mapped_user_nonIterableRest()}function role_edit_mapped_user_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function role_edit_mapped_user_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return role_edit_mapped_user_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return role_edit_mapped_user_arrayLikeToArray(o,minLen)}function role_edit_mapped_user_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function role_edit_mapped_user_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function role_edit_mapped_user_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var role_edit_mapped_user_TITLE_TEXT_DICT={mapuser:"Map user"};function RoleEditMappedUser(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState([]),_React$useState2=role_edit_mapped_user_slicedToArray(_React$useState,2),internalUsers=_React$useState2[0],setInternalUsers=_React$useState2[1];var _React$useState3=external_kbnSharedDeps_React_default.a.useState([]),_React$useState4=role_edit_mapped_user_slicedToArray(_React$useState3,2),externalIdentities=_React$useState4[0],setExternalIdentities=_React$useState4[1];var _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=role_edit_mapped_user_slicedToArray(_useState,2),userNames=_useState2[0],setUserNames=_useState2[1];var _React$useState5=external_kbnSharedDeps_React_default.a.useState([]),_React$useState6=role_edit_mapped_user_slicedToArray(_React$useState5,2),hosts=_React$useState6[0],setHosts=_React$useState6[1];var _useToastState=useToastState(),_useToastState2=role_edit_mapped_user_slicedToArray(_useToastState,3),toasts=_useToastState2[0],addToast=_useToastState2[1],removeToast=_useToastState2[2];external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchData=function(){var _ref=role_edit_mapped_user_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var originalRoleMapData;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getRoleMappingData(props.coreStart.http,props.roleName);case 3:originalRoleMapData=_context.sent;if(originalRoleMapData){setInternalUsers(originalRoleMapData.users.map(stringToComboBoxOption));setExternalIdentities(buildExternalIdentityState(originalRoleMapData.backend_roles));setHosts(originalRoleMapData.hosts)}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);addToast(createUnknownErrorToast("fetchRoleMappingData","load data"));console.log(_context.t0);case 11:case"end":return _context.stop()}}}),_callee,null,[[0,7]])})));return function fetchData(){return _ref.apply(this,arguments)}}();fetchData()}),[addToast,props.coreStart.http,props.roleName]);external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchInternalUserNames=function(){var _ref2=role_edit_mapped_user_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.t0=setUserNames;_context2.next=4;return fetchUserNameList(props.coreStart.http);case 4:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);_context2.next=12;break;case 8:_context2.prev=8;_context2.t2=_context2["catch"](0);addToast(createUnknownErrorToast("fetchInternalUserNames","load data"));console.error(_context2.t2);case 12:case"end":return _context2.stop()}}}),_callee2,null,[[0,8]])})));return function fetchInternalUserNames(){return _ref2.apply(this,arguments)}}();fetchInternalUserNames()}),[addToast,props.coreStart.http]);var internalUserOptions=userNames.map(stringToComboBoxOption);var updateRoleMappingHandler=function(){var _ref3=role_edit_mapped_user_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var validExternalIdentities,updateObject;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;validExternalIdentities=externalIdentities.filter((function(v){return v.externalIdentity!==""}));updateObject={users:internalUsers.map(comboBoxOptionToString),backend_roles:unbuildExternalIdentityState(validExternalIdentities),hosts:hosts};_context3.next=5;return updateRoleMapping(props.coreStart.http,props.roleName,updateObject);case 5:setCrossPageToast(buildUrl(types["c"].roles,types["a"].view,props.roleName,types["d"].mapuser),{id:"updateRoleMappingSucceeded",color:"success",title:'Role "'+props.roleName+'" successfully updated.'});window.location.href=buildHashUrl(types["c"].roles,types["a"].view,props.roleName,types["d"].mapuser);_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3["catch"](0);if(_context3.t0.message){addToast(createErrorToast("saveRoleMappingFailed","save error",_context3.t0.message))}else{addToast(createUnknownErrorToast("saveRoleMappingFailed","save "+props.roleName));console.error(_context3.t0)}case 12:case"end":return _context3.stop()}}}),_callee3,null,[[0,9]])})));return function updateRoleMappingHandler(){return _ref3.apply(this,arguments)}}();return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,props.buildBreadcrumbs(props.roleName,role_edit_mapped_user_TITLE_TEXT_DICT[types["d"].mapuser]),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"Map user")),"Map users to this role to inherit role permissions. Two types of users are supported: user, and backend role. ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].MapUsersToRolesDoc}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(InternalUsersPanel,{state:internalUsers,setState:setInternalUsers,optionUniverse:internalUserOptions}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(ExternalIdentitiesPanel,{externalIdentities:externalIdentities,setExternalIdentities:setExternalIdentities}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles,types["a"].view,props.roleName)}},"Cancel")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"map",fill:true,onClick:updateRoleMappingHandler},"Map"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,toastLifeTimeMs:1e4,dismissToast:removeToast}))}function cluster_permission_panel_ClusterPermissionPanel(props){var noClusterPermissions=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,"No cluster permission"),titleSize:"s",actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"addClusterPermission",disabled:props.isReserved,onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles,types["a"].edit,props.roleName)}},"Add cluster permission")});var headerText="Cluster permissions";return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:headerText,headerSubText:"Cluster permissions specify how users in this role can access the cluster. You can specify permissions using both action groups or single permissions. An action group is a list of single permissions.",helpLink:constants["m"].ClusterPermissionsDoc,count:props.clusterPermissions.length},props.loading?external_kbnSharedDeps_React_default.a.createElement("div",{className:"text-center"},loadingSpinner):props.clusterPermissions.length===0?noClusterPermissions:external_kbnSharedDeps_React_default.a.createElement(PermissionTree,{permissions:props.clusterPermissions,actionGroups:props.actionGroups}))}var ui_constants=__webpack_require__(26);function index_permission_panel_slicedToArray(arr,i){return index_permission_panel_arrayWithHoles(arr)||index_permission_panel_iterableToArrayLimit(arr,i)||index_permission_panel_unsupportedIterableToArray(arr,i)||index_permission_panel_nonIterableRest()}function index_permission_panel_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function index_permission_panel_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return index_permission_panel_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return index_permission_panel_arrayLikeToArray(o,minLen)}function index_permission_panel_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function index_permission_panel_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function index_permission_panel_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function index_permission_panel_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function index_permission_panel_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){index_permission_panel_ownKeys(Object(source),true).forEach((function(key){index_permission_panel_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{index_permission_panel_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function index_permission_panel_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function index_permission_panel_toggleRowDetails(item,actionGroupDict,setItemIdToExpandedRowMap){setItemIdToExpandedRowMap((function(prevState){var itemIdToExpandedRowMapValues=index_permission_panel_objectSpread({},prevState);if(itemIdToExpandedRowMapValues[item.id]){delete itemIdToExpandedRowMapValues[item.id]}else{itemIdToExpandedRowMapValues[item.id]=external_kbnSharedDeps_React_default.a.createElement(PermissionTree,{permissions:item.allowed_actions,actionGroups:actionGroupDict})}return itemIdToExpandedRowMapValues}))}function index_permission_panel_renderRowExpanstionArrow(itemIdToExpandedRowMap,actionGroupDict,setItemIdToExpandedRowMap){return function(item){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:function onClick(){return index_permission_panel_toggleRowDetails(item,actionGroupDict,setItemIdToExpandedRowMap)},"aria-label":itemIdToExpandedRowMap[item.id]?"Collapse":"Expand",iconType:itemIdToExpandedRowMap[item.id]?"arrowUp":"arrowDown"})}}function renderFieldLevelSecurity(){return function(items){if(items===undefined||items.length===0){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",style:{margin:"1px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{"data-test-subj":"empty-fls-text",key:"-",className:display_utils["j"].cssClassName},ui_constants["a"]))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",style:{margin:"1px"}},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{"data-test-subj":"fls-text",className:display_utils["j"].cssClassName},getFieldLevelSecurityMethod(items)==="exclude"?"Exclude":"Include",":"," ",Object(display_utils["c"])(items.map((function(s){return s.replace(/^~/,"")})))))}}function renderDocumentLevelSecurity(){return function(dls){if(!dls){return ui_constants["a"]}try{return Object(display_utils["h"])("Document-level security",JSON.parse(dls))}catch(e){console.warn("Failed to parse dls as json!");return dls}}}function index_permission_panel_getColumns(itemIdToExpandedRowMap,actionGroupDict,setItemIdToExpandedRowMap){return[{field:"index_patterns",name:"Index",sortable:true,render:Object(display_utils["k"])(display_utils["j"]),truncateText:true},{field:"allowed_actions",name:"Permissions",render:Object(display_utils["k"])(display_utils["j"]),truncateText:true},{field:"dls",name:Object(display_utils["e"])("Document-level security",constants["v"].DocumentLevelSecurity),render:renderDocumentLevelSecurity()},{field:"fls",name:Object(display_utils["e"])("Field-level security",constants["v"].FieldLevelSecurity),render:renderFieldLevelSecurity()},{field:"masked_fields",name:"Anonymizations",render:Object(display_utils["k"])(display_utils["j"]),truncateText:true},{align:external_kbnSharedDeps_ElasticEui_["RIGHT_ALIGNMENT"],width:"40px",isExpander:true,render:index_permission_panel_renderRowExpanstionArrow(itemIdToExpandedRowMap,actionGroupDict,setItemIdToExpandedRowMap)}]}function index_permission_panel_IndexPermissionPanel(props){var _useState=Object(external_kbnSharedDeps_React_["useState"])({}),_useState2=index_permission_panel_slicedToArray(_useState,2),itemIdToExpandedRowMap=_useState2[0],setItemIdToExpandedRowMap=_useState2[1];var emptyListMessage=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,"No index permission"),titleSize:"s",actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"addIndexPermission",disabled:props.isReserved,onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles,types["a"].edit,props.roleName)}},"Add index permission")});var headerText="Index permissions";return external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:headerText,headerSubText:"Index permissions allow you to specify how users in this role can access the indices. You can restrict a role to a subset of documents in an index, and which document fields a user can see as well. If you use field-level security in conjunction with document-level security, make sure you don't restrict access to the fields that document-level security uses.",helpLink:constants["m"].IndexPermissionsDoc,count:props.indexPermissions.length},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{"data-test-subj":"index-permission-container",tableLayout:"auto",loading:props.indexPermissions===[]&&!props.errorFlag,columns:index_permission_panel_getColumns(itemIdToExpandedRowMap,props.actionGroups,setItemIdToExpandedRowMap),items:props.indexPermissions,itemId:"id",sorting:{sort:{field:"type",direction:"asc"}},error:props.errorFlag?"Load data failed, please check console log for more detail.":"",isExpandable:true,itemIdToExpandedRowMap:itemIdToExpandedRowMap,message:showTableStatusMessage(props.loading,props.indexPermissions,emptyListMessage)}))}function auth_info_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function auth_info_utils_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){auth_info_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){auth_info_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function getAuthInfo(_x){return _getAuthInfo.apply(this,arguments)}function _getAuthInfo(){_getAuthInfo=auth_info_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee(http){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(request_utils["c"])(http,common["b"]);case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}),_callee)})));return _getAuthInfo.apply(this,arguments)}function getCurrentUser(_x2){return _getCurrentUser.apply(this,arguments)}function _getCurrentUser(){_getCurrentUser=auth_info_utils_asyncToGenerator(regeneratorRuntime.mark((function _callee2(http){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getAuthInfo(http);case 2:return _context2.abrupt("return",_context2.sent.user_name);case 3:case"end":return _context2.stop()}}}),_callee2)})));return _getCurrentUser.apply(this,arguments)}function getNavLinkById(coreStart,id){var navLink=coreStart.chrome.navLinks.get(id);if(navLink)return navLink.baseUrl;else return"/"}function tenants_panel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function tenants_panel_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){tenants_panel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){tenants_panel_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function tenants_panel_slicedToArray(arr,i){return tenants_panel_arrayWithHoles(arr)||tenants_panel_iterableToArrayLimit(arr,i)||tenants_panel_unsupportedIterableToArray(arr,i)||tenants_panel_nonIterableRest()}function tenants_panel_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tenants_panel_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return tenants_panel_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tenants_panel_arrayLikeToArray(o,minLen)}function tenants_panel_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function tenants_panel_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function tenants_panel_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function TenantsPanel(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState([]),_React$useState2=tenants_panel_slicedToArray(_React$useState,2),tenantPermissionDetail=_React$useState2[0],setTenantPermissionDetail=_React$useState2[1];var _React$useState3=external_kbnSharedDeps_React_default.a.useState(""),_React$useState4=tenants_panel_slicedToArray(_React$useState3,2),currentUsername=_React$useState4[0],setCurrentUsername=_React$useState4[1];var _useToastState=useToastState(),_useToastState2=tenants_panel_slicedToArray(_useToastState,3),toasts=_useToastState2[0],addToast=_useToastState2[1],removeToast=_useToastState2[2];var _React$useState5=external_kbnSharedDeps_React_default.a.useState(props.errorFlag),_React$useState6=tenants_panel_slicedToArray(_React$useState5,2),errorFlag=_React$useState6[0],setErrorFlag=_React$useState6[1];external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchData=function(){var _ref=tenants_panel_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var rawTenantData,processedTenantData,currentUser;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Object(tenant_utils["e"])(props.coreStart.http);case 3:rawTenantData=_context.sent;processedTenantData=Object(tenant_utils["l"])(rawTenantData,false);setTenantPermissionDetail(Object(tenant_utils["j"])(props.tenantPermissions,processedTenantData));_context.next=8;return getCurrentUser(props.coreStart.http);case 8:currentUser=_context.sent;setCurrentUsername(currentUser);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](0);console.log(_context.t0);setErrorFlag(true);case 16:case"end":return _context.stop()}}}),_callee,null,[[0,12]])})));return function fetchData(){return _ref.apply(this,arguments)}}();fetchData()}),[props]);var viewDashboard=function(){var _ref2=tenants_panel_asyncToGenerator(regeneratorRuntime.mark((function _callee2(tenantName){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Object(tenant_utils["i"])(props.coreStart.http,{tenant:tenantName,username:currentUsername});case 3:window.location.href=getNavLinkById(props.coreStart,types["b"].dashboardId);_context2.next=10;break;case 6:_context2.prev=6;_context2.t0=_context2["catch"](0);console.log(_context2.t0);addToast(createUnknownErrorToast("viewDashboard","view dashboard for ".concat(tenantName," tenant")));case 10:case"end":return _context2.stop()}}}),_callee2,null,[[0,6]])})));return function viewDashboard(_x){return _ref2.apply(this,arguments)}}();var viewVisualization=function(){var _ref3=tenants_panel_asyncToGenerator(regeneratorRuntime.mark((function _callee3(tenantName){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return Object(tenant_utils["i"])(props.coreStart.http,{tenant:tenantName,username:currentUsername});case 3:window.location.href=getNavLinkById(props.coreStart,types["b"].visualizationId);_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3["catch"](0);console.log(_context3.t0);addToast(createUnknownErrorToast("viewVisualization","view visualization for ".concat(tenantName," tenant")));case 10:case"end":return _context3.stop()}}}),_callee3,null,[[0,6]])})));return function viewVisualization(_x2){return _ref3.apply(this,arguments)}}();var columns=[{field:"tenant_patterns",name:"Name",render:Object(display_utils["k"])(display_utils["j"]),truncateText:true,sortable:true},{field:"description",name:"Description",truncateText:true},{field:"permissionType",name:"Read/write permission"},{field:"tenantValue",name:"Dashboard",render:function render(tenant){if(tenant===constants["s"]){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},constants["s"]))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"view-dashboard",onClick:function onClick(){return viewDashboard(tenant)}},"View dashboard"))}},{field:"tenantValue",name:"Visualizations",render:function render(tenant){if(tenant===constants["s"]){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},constants["s"]))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{"data-test-subj":"view-visualizations",onClick:function onClick(){return viewVisualization(tenant)}},"View visualizations"))}}];var emptyListMessage=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h3",null,"No tenant permission"),titleSize:"s",actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"addTenantPermission",disabled:props.isReserved,onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles,types["a"].edit,props.roleName)}},"Add tenant permission")});var headerText="Tenant permissions";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(PanelWithHeader,{headerText:headerText,headerSubText:"Tenants in Kibana are spaces for saving index patterns, visualizations, dashboards, and other Kibana objects.  Tenants are useful for safely sharing your work with other Kibana users.  You can control which roles have access to a tenant and whether those roles have read or write access.",helpLink:constants["m"].TenantPermissionsDoc,count:tenantPermissionDetail.length},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{"data-test-subj":"tenant-permission-container",tableLayout:"auto",loading:tenantPermissionDetail===[]&&!errorFlag,columns:columns,items:tenantPermissionDetail,sorting:{sort:{field:"type",direction:"asc"}},error:errorFlag?"Load data failed, please check console log for more detail.":"",message:showTableStatusMessage(props.loading,props.tenantPermissions,emptyListMessage)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,toastLifeTimeMs:1e4,dismissToast:removeToast}))}function role_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function role_view_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){role_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){role_view_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function role_view_slicedToArray(arr,i){return role_view_arrayWithHoles(arr)||role_view_iterableToArrayLimit(arr,i)||role_view_unsupportedIterableToArray(arr,i)||role_view_nonIterableRest()}function role_view_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function role_view_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return role_view_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return role_view_arrayLikeToArray(o,minLen)}function role_view_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function role_view_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function role_view_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var mappedUserColumns=[{field:"userType",name:"User type",sortable:true},{field:"userName",name:"User",sortable:true,truncateText:true}];function RoleView(props){var duplicateRoleLink=buildHashUrl(types["c"].roles,types["a"].duplicate,props.roleName);var _React$useState=external_kbnSharedDeps_React_default.a.useState([]),_React$useState2=role_view_slicedToArray(_React$useState,2),mappedUsers=_React$useState2[0],setMappedUsers=_React$useState2[1];var _React$useState3=external_kbnSharedDeps_React_default.a.useState(false),_React$useState4=role_view_slicedToArray(_React$useState3,2),errorFlag=_React$useState4[0],setErrorFlag=_React$useState4[1];var _useState=Object(external_kbnSharedDeps_React_["useState"])([]),_useState2=role_view_slicedToArray(_useState,2),selection=_useState2[0],setSelection=_useState2[1];var _React$useState5=external_kbnSharedDeps_React_default.a.useState([]),_React$useState6=role_view_slicedToArray(_React$useState5,2),hosts=_React$useState6[0],setHosts=_React$useState6[1];var _React$useState7=external_kbnSharedDeps_React_default.a.useState({}),_React$useState8=role_view_slicedToArray(_React$useState7,2),actionGroupDict=_React$useState8[0],setActionGroupDict=_React$useState8[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])([]),_useState4=role_view_slicedToArray(_useState3,2),roleClusterPermission=_useState4[0],setRoleClusterPermission=_useState4[1];var _React$useState9=external_kbnSharedDeps_React_default.a.useState([]),_React$useState10=role_view_slicedToArray(_React$useState9,2),roleIndexPermission=_React$useState10[0],setRoleIndexPermission=_React$useState10[1];var _React$useState11=external_kbnSharedDeps_React_default.a.useState([]),_React$useState12=role_view_slicedToArray(_React$useState11,2),roleTenantPermission=_React$useState12[0],setRoleTenantPermission=_React$useState12[1];var _useToastState=useToastState(),_useToastState2=role_view_slicedToArray(_useToastState,3),toasts=_useToastState2[0],addToast=_useToastState2[1],removeToast=_useToastState2[2];var _React$useState13=external_kbnSharedDeps_React_default.a.useState(false),_React$useState14=role_view_slicedToArray(_React$useState13,2),isReserved=_React$useState14[0],setIsReserved=_React$useState14[1];var _React$useState15=external_kbnSharedDeps_React_default.a.useState(false),_React$useState16=role_view_slicedToArray(_React$useState15,2),loading=_React$useState16[0],setLoading=_React$useState16[1];var PERMISSIONS_TAB_INDEX=0;var MAP_USER_TAB_INDEX=1;external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchData=function(){var _ref=role_view_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var originalRoleMapData,actionGroups,roleData;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return getRoleMappingData(props.coreStart.http,props.roleName);case 4:originalRoleMapData=_context.sent;if(originalRoleMapData){setMappedUsers(transformRoleMappingData(originalRoleMapData));setHosts(originalRoleMapData.hosts)}_context.next=8;return fetchActionGroups(props.coreStart.http);case 8:actionGroups=_context.sent;setActionGroupDict(actionGroups);_context.next=12;return getRoleDetail(props.coreStart.http,props.roleName);case 12:roleData=_context.sent;setIsReserved(roleData.reserved);setRoleClusterPermission(roleData.cluster_permissions);setRoleIndexPermission(transformRoleIndexPermissions(roleData.index_permissions));setRoleTenantPermission(Object(tenant_utils["k"])(roleData.tenant_permissions));_context.next=24;break;case 19:_context.prev=19;_context.t0=_context["catch"](0);addToast(createUnknownErrorToast("fetchRoleMappingData","load data"));console.log(_context.t0);setErrorFlag(true);case 24:_context.prev=24;setLoading(false);return _context.finish(24);case 27:case"end":return _context.stop()}}}),_callee,null,[[0,19,24,27]])})));return function fetchData(){return _ref.apply(this,arguments)}}();fetchData()}),[addToast,props.coreStart.http,props.roleName,props.prevAction]);var handleRoleMappingDelete=function(){var _ref2=role_view_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var usersToDelete,internalUsers,externalIdentities,updateObject;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;usersToDelete=selection.map((function(r){return r.userName}));internalUsers=mappedUsers.filter((function(r){return r.userType===UserType.internal})).map((function(r){return r.userName}));externalIdentities=mappedUsers.filter((function(r){return r.userType===UserType.external})).map((function(r){return r.userName}));updateObject={users:Object(external_kbnSharedDeps_Lodash_["difference"])(internalUsers,usersToDelete),backend_roles:Object(external_kbnSharedDeps_Lodash_["difference"])(externalIdentities,usersToDelete),hosts:hosts};_context2.next=7;return updateRoleMapping(props.coreStart.http,props.roleName,updateObject);case 7:setMappedUsers(Object(external_kbnSharedDeps_Lodash_["difference"])(mappedUsers,selection));setSelection([]);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2["catch"](0);console.log(_context2.t0);case 14:case"end":return _context2.stop()}}}),_callee2,null,[[0,11]])})));return function handleRoleMappingDelete(){return _ref2.apply(this,arguments)}}();var _useDeleteConfirmStat=useDeleteConfirmState(handleRoleMappingDelete,"mapping(s)"),_useDeleteConfirmStat2=role_view_slicedToArray(_useDeleteConfirmStat,2),showDeleteConfirmModal=_useDeleteConfirmStat2[0],deleteConfirmModal=_useDeleteConfirmStat2[1];var emptyListMessage=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiEmptyPrompt"],{title:external_kbnSharedDeps_React_default.a.createElement("h2",null,"No user has been mapped to this role"),titleSize:"s",body:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued",grow:false},external_kbnSharedDeps_React_default.a.createElement("p",null,"You can map users or backend roles to this role")),actions:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(display_utils["b"],{text:"Create internal user",href:buildHashUrl(types["c"].users,types["a"].create)})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"map-users",fill:true,onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles,types["a"].edit,props.roleName,types["d"].mapuser)}},"Map users")))});var tabs=[{id:"permissions",name:"Permissions",disabled:false,content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),isReserved&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:"This role is reserved for the Security plugin environment. Reserved roles are restricted for any permission customizations.",iconType:"lock",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,"Make use of this role by mapping users. You can also"," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:buildHashUrl(types["c"].roles,types["a"].create)},"create your own role")," ","or ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:duplicateRoleLink},"duplicate")," this one for further customization.")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(cluster_permission_panel_ClusterPermissionPanel,{roleName:props.roleName,clusterPermissions:roleClusterPermission,actionGroups:actionGroupDict,loading:loading,isReserved:isReserved}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(index_permission_panel_IndexPermissionPanel,{roleName:props.roleName,indexPermissions:roleIndexPermission,actionGroups:actionGroupDict,errorFlag:errorFlag,loading:loading,isReserved:isReserved}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_kbnSharedDeps_React_default.a.createElement(TenantsPanel,{roleName:props.roleName,tenantPermissions:roleTenantPermission,errorFlag:errorFlag,coreStart:props.coreStart,loading:loading,isReserved:isReserved}))},{id:"users",name:"Mapped users",disabled:false,content:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,"Mapped users",external_kbnSharedDeps_React_default.a.createElement("span",{className:"panel-header-count"}," (",mappedUsers.length,")"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued",className:"panel-header-subtext"},"You can map two types of users: users and backend roles. A user can have its own backend role and host for an external authentication and authorization. A backend role directly maps to roles through an external authentication system."," ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].MapUsersToRolesDoc}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:showDeleteConfirmModal,disabled:selection.length===0},"Delete mapping")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"manage-mapping",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].roles,types["a"].edit,props.roleName,types["d"].mapuser)}},"Manage mapping"))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{"data-test-subj":"role-mapping-list",tableLayout:"auto",loading:mappedUsers===[]&&!errorFlag,columns:mappedUserColumns,items:mappedUsers,itemId:"userName",pagination:true,message:showTableStatusMessage(loading,mappedUsers,emptyListMessage),selection:{onSelectionChange:setSelection},sorting:true,error:errorFlag?"Load data failed, please check console log for more detail.":""}))))}];var pageActions;var actionsMenuItems=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{key:"duplicate",href:duplicateRoleLink},"duplicate"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"delete",key:"delete",color:"danger",onClick:role_view_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return requestDeleteRoles(props.coreStart.http,[props.roleName]);case 3:setCrossPageToast(buildUrl(types["c"].roles),{id:"deleteRole",color:"success",title:props.roleName+" deleted."});window.location.href=buildHashUrl(types["c"].roles);_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3["catch"](0);addToast(createUnknownErrorToast("deleteRole","delete role"));case 10:case"end":return _context3.stop()}}}),_callee3,null,[[0,7]])})))},"delete")];var _useContextMenuState=useContextMenuState("Actions",{},actionsMenuItems),_useContextMenuState2=role_view_slicedToArray(_useContextMenuState,1),actionsMenu=_useContextMenuState2[0];if(isReserved){pageActions=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{href:duplicateRoleLink},"Duplicate role")}else{pageActions=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,actionsMenu),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{href:buildHashUrl(types["c"].roles,types["a"].edit,props.roleName)},"Edit role")))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,props.buildBreadcrumbs(props.roleName),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,props.roleName))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,pageActions)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTabbedContent"],{tabs:tabs,initialSelectedTab:props.prevAction===types["d"].mapuser?tabs[MAP_USER_TAB_INDEX]:tabs[PERMISSIONS_TAB_INDEX]}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,toastLifeTimeMs:1e4,dismissToast:removeToast}),deleteConfirmModal)}function tenant_list_edit_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function tenant_list_edit_modal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){tenant_list_edit_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){tenant_list_edit_modal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function tenant_list_edit_modal_slicedToArray(arr,i){return tenant_list_edit_modal_arrayWithHoles(arr)||tenant_list_edit_modal_iterableToArrayLimit(arr,i)||tenant_list_edit_modal_unsupportedIterableToArray(arr,i)||tenant_list_edit_modal_nonIterableRest()}function tenant_list_edit_modal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tenant_list_edit_modal_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return tenant_list_edit_modal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tenant_list_edit_modal_arrayLikeToArray(o,minLen)}function tenant_list_edit_modal_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function tenant_list_edit_modal_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function tenant_list_edit_modal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}var edit_modal_TITLE_DICT={[types["a"].create]:"Create tenant",[types["a"].edit]:"Edit tenant",[types["a"].duplicate]:"Duplicate tenant"};function TenantEditModal(props){var _useState=Object(external_kbnSharedDeps_React_["useState"])(props.tenantName),_useState2=tenant_list_edit_modal_slicedToArray(_useState,2),tenantName=_useState2[0],setTenantName=_useState2[1];var _React$useState=external_kbnSharedDeps_React_default.a.useState(props.tenantDescription),_React$useState2=tenant_list_edit_modal_slicedToArray(_React$useState,2),tenantDescription=_React$useState2[0],setTenantDescription=_React$useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(true),_useState4=tenant_list_edit_modal_slicedToArray(_useState3,2),isFormValid=_useState4[0],setIsFormValid=_useState4[1];var handleTenantDescriptionChange=function handleTenantDescriptionChange(e){setTenantDescription(e.target.value)};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModal"],{onClose:props.handleClose},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,edit_modal_TITLE_DICT[props.action])),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],null,external_kbnSharedDeps_React_default.a.createElement(NameRow,{headerText:"Name",headerSubText:"Specify a descriptive and unique tenant name that is easy to recognize. You cannot edit the name once the tenant is created.",resourceName:tenantName,resourceType:"tenant",action:props.action,setNameState:setTenantName,setIsFormValid:setIsFormValid,fullWidth:true}),external_kbnSharedDeps_React_default.a.createElement(form_row["a"],{headerText:"Description",headerSubText:"Describe the purpose of the tenant.",optional:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextArea"],{"data-test-subj":"tenant-description",fullWidth:true,placeholder:"Describe the tenant",value:tenantDescription,onChange:handleTenantDescriptionChange})))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"xs"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiModalFooter"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:props.handleClose},"Cancel"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"submit",onClick:tenant_list_edit_modal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return props.handleSave(tenantName,tenantDescription);case 2:case"end":return _context.stop()}}}),_callee)}))),fill:true,disabled:!isFormValid},props.action===types["a"].create?"Create":"Save"))))}function TenantInstructionView(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"Tenants")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"xxl"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{textAlign:"center"},external_kbnSharedDeps_React_default.a.createElement("h2",null,"You have not enabled multi tenancy")),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{textAlign:"center",size:"xs",color:"subdued",className:"instruction-text"},"Contact your administrator to enable multi tenancy."))}function tenant_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function tenant_list_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){tenant_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){tenant_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function tenant_list_slicedToArray(arr,i){return tenant_list_arrayWithHoles(arr)||tenant_list_iterableToArrayLimit(arr,i)||tenant_list_unsupportedIterableToArray(arr,i)||tenant_list_nonIterableRest()}function tenant_list_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tenant_list_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return tenant_list_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tenant_list_arrayLikeToArray(o,minLen)}function tenant_list_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function tenant_list_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function tenant_list_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function TenantList(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState([]),_React$useState2=tenant_list_slicedToArray(_React$useState,2),tenantData=_React$useState2[0],setTenantData=_React$useState2[1];var _React$useState3=external_kbnSharedDeps_React_default.a.useState(false),_React$useState4=tenant_list_slicedToArray(_React$useState3,2),errorFlag=_React$useState4[0],setErrorFlag=_React$useState4[1];var _React$useState5=external_kbnSharedDeps_React_default.a.useState([]),_React$useState6=tenant_list_slicedToArray(_React$useState5,2),selection=_React$useState6[0],setSelection=_React$useState6[1];var _useState=Object(external_kbnSharedDeps_React_["useState"])(""),_useState2=tenant_list_slicedToArray(_useState,2),currentTenant=_useState2[0],setCurrentTenant=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(""),_useState4=tenant_list_slicedToArray(_useState3,2),currentUsername=_useState4[0],setCurrentUsername=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])(null),_useState6=tenant_list_slicedToArray(_useState5,2),editModal=_useState6[0],setEditModal=_useState6[1];var _useToastState=useToastState(),_useToastState2=tenant_list_slicedToArray(_useToastState,3),toasts=_useToastState2[0],addToast=_useToastState2[1],removeToast=_useToastState2[2];var _useState7=Object(external_kbnSharedDeps_React_["useState"])(false),_useState8=tenant_list_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=Object(external_kbnSharedDeps_React_["useState"])(null),_useState10=tenant_list_slicedToArray(_useState9,2),query=_useState10[0],setQuery=_useState10[1];var isPrivateEnabled=props.config.multitenancy.tenants.enable_private;var fetchData=Object(external_kbnSharedDeps_React_["useCallback"])(tenant_list_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var rawTenantData,processedTenantData,activeTenant,currentUser;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return Object(tenant_utils["e"])(props.coreStart.http);case 4:rawTenantData=_context.sent;processedTenantData=Object(tenant_utils["l"])(rawTenantData,isPrivateEnabled);_context.next=8;return Object(tenant_utils["c"])(props.coreStart.http);case 8:activeTenant=_context.sent;_context.next=11;return getCurrentUser(props.coreStart.http);case 11:currentUser=_context.sent;setCurrentUsername(currentUser);setCurrentTenant(Object(tenant_utils["h"])(activeTenant,currentUser));setTenantData(processedTenantData);_context.next=21;break;case 17:_context.prev=17;_context.t0=_context["catch"](0);console.log(_context.t0);setErrorFlag(true);case 21:_context.prev=21;setLoading(false);return _context.finish(21);case 24:case"end":return _context.stop()}}}),_callee,null,[[0,17,21,24]])}))),[isPrivateEnabled,props.coreStart.http]);external_kbnSharedDeps_React_default.a.useEffect((function(){fetchData()}),[props.coreStart.http,fetchData]);var handleDelete=function(){var _ref2=tenant_list_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var tenantsToDelete;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:tenantsToDelete=selection.map((function(r){return r.tenant}));_context2.prev=1;_context2.next=4;return Object(tenant_utils["g"])(props.coreStart.http,tenantsToDelete);case 4:setTenantData(Object(external_kbnSharedDeps_Lodash_["difference"])(tenantData,selection));setSelection([]);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](1);console.log(_context2.t0);case 11:_context2.prev=11;closeActionsMenu();return _context2.finish(11);case 14:case"end":return _context2.stop()}}}),_callee2,null,[[1,8,11,14]])})));return function handleDelete(){return _ref2.apply(this,arguments)}}();var _useDeleteConfirmStat=useDeleteConfirmState(handleDelete,"tenant(s)"),_useDeleteConfirmStat2=tenant_list_slicedToArray(_useDeleteConfirmStat,2),showDeleteConfirmModal=_useDeleteConfirmStat2[0],deleteConfirmModal=_useDeleteConfirmStat2[1];var changeTenant=function(){var _ref3=tenant_list_asyncToGenerator(regeneratorRuntime.mark((function _callee3(tenantValue){var selectedTenant;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Object(tenant_utils["i"])(props.coreStart.http,{tenant:tenantValue,username:currentUsername});case 2:selectedTenant=_context3.sent;setCurrentTenant(Object(tenant_utils["h"])(selectedTenant,currentUsername));case 4:case"end":return _context3.stop()}}}),_callee3)})));return function changeTenant(_x){return _ref3.apply(this,arguments)}}();var getTenantName=function getTenantName(tenantValue){var _tenantData$find;return(_tenantData$find=tenantData.find((function(tenant){return tenant.tenantValue===tenantValue})))===null||_tenantData$find===void 0?void 0:_tenantData$find.tenant};var switchToSelectedTenant=function(){var _ref4=tenant_list_asyncToGenerator(regeneratorRuntime.mark((function _callee4(tenantValue,tenantName){return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return changeTenant(tenantValue);case 3:window.location.reload();_context4.next=10;break;case 6:_context4.prev=6;_context4.t0=_context4["catch"](0);console.log(_context4.t0);addToast(createUnknownErrorToast("selectFailed","select ".concat(tenantName," tenant")));case 10:_context4.prev=10;closeActionsMenu();return _context4.finish(10);case 13:case"end":return _context4.stop()}}}),_callee4,null,[[0,6,10,13]])})));return function switchToSelectedTenant(_x2,_x3){return _ref4.apply(this,arguments)}}();var viewOrCreateDashboard=function(){var _ref5=tenant_list_asyncToGenerator(regeneratorRuntime.mark((function _callee5(tenantValue,action){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return changeTenant(tenantValue);case 3:window.location.href=getNavLinkById(props.coreStart,types["b"].dashboardId);_context5.next=10;break;case 6:_context5.prev=6;_context5.t0=_context5["catch"](0);console.log(_context5.t0);addToast(createUnknownErrorToast("".concat(action,"Dashboard"),"".concat(action," dashboard for ").concat(getTenantName(tenantValue)," tenant")));case 10:case"end":return _context5.stop()}}}),_callee5,null,[[0,6]])})));return function viewOrCreateDashboard(_x4,_x5){return _ref5.apply(this,arguments)}}();var viewOrCreateVisualization=function(){var _ref6=tenant_list_asyncToGenerator(regeneratorRuntime.mark((function _callee6(tenantValue,action){return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return changeTenant(tenantValue);case 3:window.location.href=getNavLinkById(props.coreStart,types["b"].visualizationId);_context6.next=10;break;case 6:_context6.prev=6;_context6.t0=_context6["catch"](0);console.log(_context6.t0);addToast(createUnknownErrorToast("".concat(action,"Visualization"),"".concat(action," visualization for ").concat(getTenantName(tenantValue)," tenant")));case 10:case"end":return _context6.stop()}}}),_callee6,null,[[0,6]])})));return function viewOrCreateVisualization(_x6,_x7){return _ref6.apply(this,arguments)}}();var columns=[{field:"tenant",name:"Name",render:function render(tenantName){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,tenantName,tenantName===currentTenant&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],null,"Current")))},sortable:true},{field:"description",name:"Description",truncateText:true},{field:"tenantValue",name:"Dashboard",render:function render(tenant){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:function onClick(){return viewOrCreateDashboard(tenant,types["a"].view)}},"View dashboard"))}},{field:"tenantValue",name:"Visualizations",render:function render(tenant){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{onClick:function onClick(){return viewOrCreateVisualization(tenant,types["a"].view)}},"View visualizations"))}},{field:"reserved",name:"Customization",render:function render(reserved){return Object(display_utils["g"])(reserved,display_utils["j"])}}];var actionsMenuItems=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{id:"switchTenant",key:"switchTenant",disabled:selection.length!==1,onClick:function onClick(){return switchToSelectedTenant(selection[0].tenantValue,selection[0].tenant)}},"Switch to selected tenant"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{id:"edit",key:"edit",disabled:selection.length!==1||selection[0].reserved,onClick:function onClick(){return showEditModal(selection[0].tenant,types["a"].edit,selection[0].description)}},"Edit"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{id:"duplicate",key:"duplicate",disabled:selection.length!==1,onClick:function onClick(){return showEditModal(Object(resource_utils["a"])(types["a"].duplicate,selection[0].tenant),types["a"].duplicate,selection[0].description)}},"Duplicate"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{id:"createDashboard",key:"createDashboard",disabled:selection.length!==1,onClick:function onClick(){return viewOrCreateDashboard(selection[0].tenantValue,types["a"].create)}},"Create dashboard"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{id:"createVisualizations",key:"createVisualizations",disabled:selection.length!==1,onClick:function onClick(){return viewOrCreateVisualization(selection[0].tenantValue,types["a"].create)}},"Create visualizations"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{id:"delete",key:"delete",color:"danger",onClick:showDeleteConfirmModal,disabled:selection.length===0||selection.some((function(tenant){return tenant.reserved}))},"Delete")];var _useContextMenuState=useContextMenuState("Actions",{},actionsMenuItems),_useContextMenuState2=tenant_list_slicedToArray(_useContextMenuState,2),actionsMenu=_useContextMenuState2[0],closeActionsMenu=_useContextMenuState2[1];var showEditModal=function showEditModal(initialTenantName,action,initialTenantDescription){setEditModal(external_kbnSharedDeps_React_default.a.createElement(TenantEditModal,{tenantName:initialTenantName,tenantDescription:initialTenantDescription,action:action,handleClose:function handleClose(){return setEditModal(null)},handleSave:function(){var _ref7=tenant_list_asyncToGenerator(regeneratorRuntime.mark((function _callee7(tenantName,tenantDescription){return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return Object(tenant_utils["m"])(props.coreStart.http,tenantName,{description:tenantDescription});case 3:setEditModal(null);fetchData();addToast({id:"saveSucceeded",title:getSuccessToastMessage("Tenant",action,tenantName),color:"success"});_context7.next=12;break;case 8:_context7.prev=8;_context7.t0=_context7["catch"](0);console.log(_context7.t0);addToast(createUnknownErrorToast("saveFailed","save ".concat(action," tenant")));case 12:case"end":return _context7.stop()}}}),_callee7,null,[[0,8]])})));return function(_x8,_x9){return _ref7.apply(this,arguments)}}()}))};if(!props.config.multitenancy.enabled){return external_kbnSharedDeps_React_default.a.createElement(TenantInstructionView,null)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"Tenants"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,"Tenants",external_kbnSharedDeps_React_default.a.createElement("span",{className:"panel-header-count"}," ","(",external_kbnSharedDeps_ElasticEui_["Query"].execute(query||"",tenantData).length,")"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},"Tenants in Kibana are spaces for saving index patterns, visualizations, dashboards, and other Kibana objects. Use tenants to safely share your work with other Kibana users. You can control which roles have access to a tenant and whether those roles have read or write access. The “Current” label indicates which tenant you are using now. Switch to another tenant anytime from your user profile, which is located on the top right of the screen. ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].TenantPermissionsDoc}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,actionsMenu),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{id:"createTenant",fill:true,onClick:function onClick(){return showEditModal("",types["a"].create,"")}},"Create tenant"))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{tableLayout:"auto",loading:tenantData===[]&&!errorFlag,columns:columns,items:tenantData,itemId:"tenant",pagination:true,search:{box:{placeholder:"Find tenant"},onChange:function onChange(arg){setQuery(arg.query);return true}},selection:{onSelectionChange:setSelection},sorting:true,error:errorFlag?"Load data failed, please check console log for more detail.":"",message:showTableStatusMessage(loading,tenantData)}))),editModal,deleteConfirmModal,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,toastLifeTimeMs:1e4,dismissToast:removeToast}))}function user_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function user_list_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){user_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){user_list_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function user_list_slicedToArray(arr,i){return user_list_arrayWithHoles(arr)||user_list_iterableToArrayLimit(arr,i)||user_list_unsupportedIterableToArray(arr,i)||user_list_nonIterableRest()}function user_list_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function user_list_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return user_list_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return user_list_arrayLikeToArray(o,minLen)}function user_list_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function user_list_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function user_list_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function dictView(items){if(Object(external_kbnSharedDeps_Lodash_["isEmpty"])(items)){return ui_constants["a"]}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{direction:"column",style:{margin:"1px"}},Object(external_kbnSharedDeps_Lodash_["map"])(items,(function(v,k){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{key:k,className:display_utils["j"].cssClassName},k,": ",'"'.concat(v,'"'))})))}function user_list_getColumns(currentUsername){return[{field:"username",name:"Username",render:function render(username){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement("a",{href:buildHashUrl(types["c"].users,types["a"].edit,username)},username),username===currentUsername&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBadge"],null,"Current")))},sortable:true},{field:"backend_roles",name:"Backend roles",render:Object(display_utils["k"])(display_utils["j"])},{field:"attributes",name:"Attributes",render:dictView,truncateText:true}]}function UserList(props){var _React$useState=external_kbnSharedDeps_React_default.a.useState([]),_React$useState2=user_list_slicedToArray(_React$useState,2),userData=_React$useState2[0],setUserData=_React$useState2[1];var _React$useState3=external_kbnSharedDeps_React_default.a.useState(false),_React$useState4=user_list_slicedToArray(_React$useState3,2),errorFlag=_React$useState4[0],setErrorFlag=_React$useState4[1];var _React$useState5=external_kbnSharedDeps_React_default.a.useState([]),_React$useState6=user_list_slicedToArray(_React$useState5,2),selection=_React$useState6[0],setSelection=_React$useState6[1];var _useState=Object(external_kbnSharedDeps_React_["useState"])(""),_useState2=user_list_slicedToArray(_useState,2),currentUsername=_useState2[0],setCurrentUsername=_useState2[1];var _useState3=Object(external_kbnSharedDeps_React_["useState"])(false),_useState4=user_list_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=Object(external_kbnSharedDeps_React_["useState"])(null),_useState6=user_list_slicedToArray(_useState5,2),query=_useState6[0],setQuery=_useState6[1];external_kbnSharedDeps_React_default.a.useEffect((function(){var fetchData=function(){var _ref=user_list_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var userDataPromise;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);userDataPromise=getUserList(props.coreStart.http);_context.t0=setCurrentUsername;_context.next=6;return getAuthInfo(props.coreStart.http);case 6:_context.t1=_context.sent.user_name;(0,_context.t0)(_context.t1);_context.t2=setUserData;_context.next=11;return userDataPromise;case 11:_context.t3=_context.sent;(0,_context.t2)(_context.t3);_context.next=19;break;case 15:_context.prev=15;_context.t4=_context["catch"](0);console.log(_context.t4);setErrorFlag(true);case 19:_context.prev=19;setLoading(false);return _context.finish(19);case 22:case"end":return _context.stop()}}}),_callee,null,[[0,15,19,22]])})));return function fetchData(){return _ref.apply(this,arguments)}}();fetchData()}),[props.coreStart.http]);var handleDelete=function(){var _ref2=user_list_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var usersToDelete;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:usersToDelete=selection.map((function(r){return r.username}));_context2.prev=1;_context2.next=4;return requestDeleteUsers(props.coreStart.http,usersToDelete);case 4:setUserData(Object(external_kbnSharedDeps_Lodash_["difference"])(userData,selection));setSelection([]);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](1);console.log(_context2.t0);case 11:_context2.prev=11;closeActionsMenu();return _context2.finish(11);case 14:case"end":return _context2.stop()}}}),_callee2,null,[[1,8,11,14]])})));return function handleDelete(){return _ref2.apply(this,arguments)}}();var _useDeleteConfirmStat=useDeleteConfirmState(handleDelete,"user(s)"),_useDeleteConfirmStat2=user_list_slicedToArray(_useDeleteConfirmStat,2),showDeleteConfirmModal=_useDeleteConfirmStat2[0],deleteConfirmModal=_useDeleteConfirmStat2[1];var actionsMenuItems=[external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"edit",key:"edit",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].users,types["a"].edit,selection[0].username)},disabled:selection.length!==1},"Edit"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"duplicate",key:"duplicate",onClick:function onClick(){window.location.href=buildHashUrl(types["c"].users,types["a"].duplicate,selection[0].username)},disabled:selection.length!==1},"Duplicate"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{key:"export",disabled:selection.length!==1,href:selection.length===1?"".concat(props.coreStart.http.basePath.serverBasePath).concat(constants["e"],"/").concat(selection[0].username):"",target:"_blank"},"Export JSON"),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{key:"delete",color:"danger",onClick:showDeleteConfirmModal,disabled:selection.length===0||selection.some((function(e){return e.username===currentUsername}))},"Delete")];var _useContextMenuState=useContextMenuState("Actions",{},actionsMenuItems),_useContextMenuState2=user_list_slicedToArray(_useContextMenuState,2),actionsMenu=_useContextMenuState2[0],closeActionsMenu=_useContextMenuState2[1];return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"l"},external_kbnSharedDeps_React_default.a.createElement("h1",null,"Internal users"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeader"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("h3",null,"Internal users",external_kbnSharedDeps_React_default.a.createElement("span",{className:"panel-header-count"}," ","(",external_kbnSharedDeps_ElasticEui_["Query"].execute(query||"",userData).length,")"))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"xs",color:"subdued"},"The Security plugin includes an internal user database. Use this database in place of, or in addition to, an external authentication system such as LDAP server or Active Directory. You can map an internal user to a role from"," ",external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiLink"],{href:buildHashUrl(types["c"].roles)},"Roles"),". First, click into the detail page of the role. Then, under “Mapped users”, click “Manage mapping” ",external_kbnSharedDeps_React_default.a.createElement(display_utils["a"],{href:constants["m"].MapUsersToRolesDoc}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContentHeaderSection"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,actionsMenu),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fill:true,href:buildHashUrl(types["c"].users,types["a"].create)},"Create internal user"))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiInMemoryTable"],{tableLayout:"auto",loading:userData===[]&&!errorFlag,columns:user_list_getColumns(currentUsername),items:userData,itemId:"username",pagination:true,search:{box:{placeholder:"Search internal users"},onChange:function onChange(arg){setQuery(arg.query);return true}},selection:{onSelectionChange:setSelection},sorting:true,error:errorFlag?"Load data failed, please check console log for more detail.":"",message:showTableStatusMessage(loading,userData)})),deleteConfirmModal))}function cross_page_toast_slicedToArray(arr,i){return cross_page_toast_arrayWithHoles(arr)||cross_page_toast_iterableToArrayLimit(arr,i)||cross_page_toast_unsupportedIterableToArray(arr,i)||cross_page_toast_nonIterableRest()}function cross_page_toast_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cross_page_toast_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return cross_page_toast_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cross_page_toast_arrayLikeToArray(o,minLen)}function cross_page_toast_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function cross_page_toast_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function cross_page_toast_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function CrossPageToast(){var _useToastState=useToastState(),_useToastState2=cross_page_toast_slicedToArray(_useToastState,3),toasts=_useToastState2[0],addToast=_useToastState2[1],removeToast=_useToastState2[2];var location=Object(external_kbnSharedDeps_ReactRouterDom_["useLocation"])();external_kbnSharedDeps_React_default.a.useEffect((function(){var toast=getAndClearCrossPageToast(location.pathname);if(toast){addToast(toast)}}),[addToast,location]);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiGlobalToastList"],{toasts:toasts,toastLifeTimeMs:1e4,dismissToast:removeToast})}function app_router_extends(){app_router_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return app_router_extends.apply(this,arguments)}function app_router_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function app_router_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){app_router_ownKeys(Object(source),true).forEach((function(key){app_router_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{app_router_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function app_router_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var LANDING_PAGE_URL="/getstarted";var ROUTE_MAP={getStarted:{name:"Get Started",href:LANDING_PAGE_URL},[types["c"].roles]:{name:"Roles",href:buildUrl(types["c"].roles)},[types["c"].users]:{name:"Internal users",href:buildUrl(types["c"].users)},[types["c"].permissions]:{name:"Permissions",href:buildUrl(types["c"].permissions)},[types["c"].tenants]:{name:"Tenants",href:buildUrl(types["c"].tenants)},[types["c"].auth]:{name:"Authentication",href:buildUrl(types["c"].auth)},[types["c"].auditLogging]:{name:"Audit logs",href:buildUrl(types["c"].auditLogging)}};var ROUTE_LIST=[ROUTE_MAP.getStarted,ROUTE_MAP[types["c"].auth],ROUTE_MAP[types["c"].roles],ROUTE_MAP[types["c"].users],ROUTE_MAP[types["c"].permissions],ROUTE_MAP[types["c"].tenants],ROUTE_MAP[types["c"].auditLogging]];var allNavPanelUrls=ROUTE_LIST.map((function(route){return route.href})).concat([buildUrl(types["c"].auditLogging)+audit_logging_constants["c"],buildUrl(types["c"].auditLogging)+audit_logging_constants["b"]]);function getBreadcrumbs(resourceType,pageTitle,subAction){var breadcrumbs=[{text:"Security",href:buildHashUrl()}];if(resourceType){breadcrumbs.push({text:ROUTE_MAP[resourceType].name,href:buildHashUrl(resourceType)})}if(pageTitle){breadcrumbs.push({text:pageTitle})}if(subAction){breadcrumbs.push({text:subAction})}return breadcrumbs}function decodeParams(params){return Object.keys(params).reduce((function(obj,key){obj[key]=decodeURIComponent(params[key]);return obj}),{})}function AppRouter(props){var setGlobalBreadcrumbs=Object(external_kbnSharedDeps_Lodash_["flow"])(getBreadcrumbs,props.coreStart.chrome.setBreadcrumbs);return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["HashRouter"],{basename:props.params.appBasePath},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPage"],null,allNavPanelUrls.map((function(route){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{key:route,path:route,exact:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageSideBar"],null,external_kbnSharedDeps_React_default.a.createElement(NavPanel,{items:ROUTE_LIST})))})),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Switch"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:buildUrl(types["c"].roles,types["a"].edit)+"/:roleName/"+types["d"].mapuser,render:function render(match){return external_kbnSharedDeps_React_default.a.createElement(RoleEditMappedUser,app_router_extends({buildBreadcrumbs:Object(external_kbnSharedDeps_Lodash_["partial"])(setGlobalBreadcrumbs,types["c"].roles)},app_router_objectSpread(app_router_objectSpread({},props),decodeParams(match.match.params))))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:buildUrl(types["c"].roles,types["a"].view)+"/:roleName/:prevAction?",render:function render(match){return external_kbnSharedDeps_React_default.a.createElement(RoleView,app_router_extends({buildBreadcrumbs:Object(external_kbnSharedDeps_Lodash_["partial"])(setGlobalBreadcrumbs,types["c"].roles)},app_router_objectSpread(app_router_objectSpread({},props),decodeParams(match.match.params))))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:buildUrl(types["c"].roles)+"/:action/:sourceRoleName?",render:function render(match){return external_kbnSharedDeps_React_default.a.createElement(RoleEdit,app_router_extends({buildBreadcrumbs:Object(external_kbnSharedDeps_Lodash_["partial"])(setGlobalBreadcrumbs,types["c"].roles)},app_router_objectSpread(app_router_objectSpread({},props),decodeParams(match.match.params))))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ROUTE_MAP.roles.href,render:function render(){setGlobalBreadcrumbs(types["c"].roles);return external_kbnSharedDeps_React_default.a.createElement(RoleList,props)}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ROUTE_MAP.auth.href,render:function render(){setGlobalBreadcrumbs(types["c"].auth);return external_kbnSharedDeps_React_default.a.createElement(AuthView,props)}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:buildUrl(types["c"].users)+"/:action/:sourceUserName?",render:function render(match){return external_kbnSharedDeps_React_default.a.createElement(InternalUserEdit,app_router_extends({buildBreadcrumbs:Object(external_kbnSharedDeps_Lodash_["partial"])(setGlobalBreadcrumbs,types["c"].users)},app_router_objectSpread(app_router_objectSpread({},props),decodeParams(match.match.params))))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ROUTE_MAP.users.href,render:function render(){setGlobalBreadcrumbs(types["c"].users);return external_kbnSharedDeps_React_default.a.createElement(UserList,props)}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:buildUrl(types["c"].auditLogging)+audit_logging_constants["c"],render:function render(){setGlobalBreadcrumbs(types["c"].auditLogging,"General settings");return external_kbnSharedDeps_React_default.a.createElement(AuditLoggingEditSettings,app_router_extends({setting:"general"},props))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:buildUrl(types["c"].auditLogging)+audit_logging_constants["b"],render:function render(){setGlobalBreadcrumbs(types["c"].auditLogging,"Compliance settings");return external_kbnSharedDeps_React_default.a.createElement(AuditLoggingEditSettings,app_router_extends({setting:"compliance"},props))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ROUTE_MAP.auditLogging.href+"/:fromType?",render:function render(match){setGlobalBreadcrumbs(types["c"].auditLogging);return external_kbnSharedDeps_React_default.a.createElement(AuditLogging,app_router_objectSpread(app_router_objectSpread({},props),match.match.params))}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ROUTE_MAP.permissions.href,render:function render(){setGlobalBreadcrumbs(types["c"].permissions);return external_kbnSharedDeps_React_default.a.createElement(PermissionList,props)}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ROUTE_MAP.tenants.href,render:function render(){setGlobalBreadcrumbs(types["c"].tenants);return external_kbnSharedDeps_React_default.a.createElement(TenantList,props)}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Route"],{path:ROUTE_MAP.getStarted.href,render:function render(){setGlobalBreadcrumbs();return external_kbnSharedDeps_React_default.a.createElement(GetStarted,props)}}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ReactRouterDom_["Redirect"],{exact:true,from:"/",to:LANDING_PAGE_URL}))),external_kbnSharedDeps_React_default.a.createElement(CrossPageToast,null)))}function renderApp(coreStart,navigation,params,config){var deps={coreStart:coreStart,navigation:navigation,params:params,config:config};external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(AppRouter,deps)),params.element);return function(){return external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(params.element)}}}}]);